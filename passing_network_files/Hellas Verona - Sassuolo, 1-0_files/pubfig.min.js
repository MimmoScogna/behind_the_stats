!function(){"use strict";var e={name:"pubfig.js",version:"5.39.5",builds:{analytics:"1.3.1",pbjs:"8.30.4"},description:"Freestar Publisher",main:"src/pubfig.js",engineStrict:!0,engines:{node:">=20"},scripts:{test:"nyc --reporter=text-summary mocha --reporter nyan -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js --exit && :","test:html-report":"nyc --reporter=html mocha -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js  --exit","test:watch":"mocha --watch -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js","readme:coverage":"npm run test && nyc report --reporter=json-summary && node generateCodeCoverageReportImages.mjs",mocha:"env TEST=true mocha",analyze:"webpack --config webpack.analyze.js","dev:rollup":"rollup --config rollup.dev.js --watch",dev:"webpack serve --config webpack.dev.js","dev:https":"webpack serve --config webpack.dev.js --https","build-rollup:production":"rollup -c rollup.prod.js && bin/base64.github.sh prod","build-rollup:pipeline":"rollup -c rollup.pipeline.js","build:github":"webpack --config webpack.prod.js && bin/base64.github.sh prod","build:release":"webpack --config webpack.release.js && bin/base64.github.sh prod","build-rollup:release":"rollup -c rollup.release.js && bin/base64.github.sh prod","build:production":"webpack --config webpack.prod.js && bin/base64.sh prod","publish:production":"bin/publish.sh a.pub.network","publish:staging":"bin/publish.sh",lint:"eslint ./src ./test && prettier --check ./src ./test","lint:fix":"eslint --max-warnings=0 --fix ./src ./test && prettier --write ./src ./test",prepare:"husky install"},"lint-staged":{"*.js":["npm run test","npm run lint:fix"]},repository:{type:"git",url:"https://github.com/freestarcapital/pubfig.js.git"},keywords:["advertising"],author:"Freestar Engineering Group",private:!0,license:"UNLICENSED",devDependencies:{"@babel/core":"^7.12.10","@babel/preset-env":"^7.0.0","@babel/register":"^7.22.15","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-eslint":"^9.0.5","@rollup/plugin-json":"^6.0.1","@rollup/plugin-multi-entry":"^6.0.1","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-replace":"^5.0.5",autoprefixer:"^10.4.16","babel-eslint":"^10.1.0","babel-loader":"^9.1.3",c8:"^8.0.1",chai:"^4.3.4","chai-spies":"^1.0.0","clean-webpack-plugin":"^4.0.0","compression-webpack-plugin":"^10.0.0","core-js":"^3.8.2","css-loader":"^6.8.1","current-git-branch":"^1.1.0",dotenv:"^16.3.1",eslint:"^7.32.0","eslint-config-prettier":"^9.1.0","eslint-loader":"^4.0.2","eslint-webpack-plugin":"^2.4.1","gpt-mock":"^1.0.2",husky:"^8.0.3",jsdom:"^22.1.0","jsdom-global":"^3.0.2","lint-staged":"^15.0.2",lodash:"^4.17.21",mocha:"^10.2.0","mocha-sinon":"^2.1.2","mock-local-storage":"^1.1.17",nyc:"^15.1.0",postcss:"^8.2.2","postcss-loader":"^7.3.3","postcss-preset-env":"^9.2.0",prettier:"^3.1.1",rollup:"^2.79.1","rollup-plugin-gzip":"^3.1.0","rollup-plugin-livereload":"^2.0.5","rollup-plugin-postcss":"^4.0.2","rollup-plugin-replace":"^2.2.0","rollup-plugin-serve":"^2.0.2","rollup-plugin-terser":"^7.0.2",semver:"^7.3.5",sinon:"^16.1.0","sinon-chai":"^3.7.0","string-replace-webpack-plugin":"^0.1.3","style-loader":"^3.3.3",webpack:"^5.88.0","webpack-bundle-analyzer":"^4.3.0","webpack-cli":"^5.1.4","webpack-dev-server":"^4.15.1","webpack-merge":"^5.7.2",yargs:"^17.7.2"},dependencies:{"adblock-detector":"^2.1.0","crypto-js":"^4.1.1",deepmerge:"^4.2.2","fast-copy":"^3.0.1","js-cookie":"^3.0.5","ua-parser-js":"^1.0.36",uuid:"^9.0.1"},browserslist:"last 2 versions"};const t="https://d.pub.network",n=[[468,60],[728,90],[970,90],[970,250],[300,50],[300,100],[320,50],[320,100],[120,600],[160,600],[300,250],[300,600],[336,280],[1,1],[0,0]],i=["AT","BE","BG","HR","CY","CZ","DK","EE","EL","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","NO","IS","LI"],r=["CA","CT","CO","VA","UT"],s={videoAdhesion:{prettyName:"Sticky Footer Video Adhesion",disabled:!1},stickyFooter:{prettyName:"Sticky Footer",disabled:!1,refreshDisabled:!1,refreshInterval:0},video:{prettyName:"Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},standAloneVideo:{prettyName:"Stand Alone Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},revolvingRail:{prettyName:"Revolving Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0},pushdown:{prettyName:"Pushdown",disabled:!1,refreshDisabled:!1,refreshInterval:0},dynamicAds:{prettyName:"Dynamic Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptions"},dynamicAdsV2:{prettyName:"Dynamic Ads V2",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptionsV2"},footerBidding:{prettyName:"Footer Bidding",disabled:!1,refreshDisabled:!1,refreshInterval:0},superflex:{prettyName:"Superflex",disabled:!1,refreshDisabled:!1,refreshInterval:0},slidingUnit:{prettyName:"Sliding Unit",disabled:!1,refreshDisabled:!1,refreshInterval:0},sideWall:{prettyName:"Sidewall",disabled:!1,refreshDisabled:!1,refreshInterval:0},pageGrabber:{prettyName:"Page Grabber",disabled:!1,refreshDisabled:!1,refreshInterval:0},interstitial:{prettyName:"Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},googleInterstitial:{prettyName:"Google Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},dianomiContentRec:{prettyName:"Dianomi Content Recommendation",disabled:!1,refreshDisabled:!1,refreshInterval:0},lazyLoad:{prettyName:"Lazy Loaded Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0}},a=()=>{const e=document.querySelectorAll('script[src*="pubfig.min.js"]'),t=Array.from(e).find((e=>!e.src.includes("/core/")));return t?t.src.split("https://a.pub.network/")[1].split("/")[0]:"freestar-com"},o=`${t}/v2/sites/${a()}/configs?env=ENV`,d="&configId=NUMBER",l="&debug=true",c="&testId=TEST_ID",u="&variantId=VARIANT_ID",f="fs.abtest.group",p="fs.abtest.id",g="fs.abtest.type",m="fs.abtest.variant_type",h="fs.abtest.pubfig_location",b={pubfigEngineLoadInit:"pubfig-engine-load-init",pubfigEngineSetupStart:"pubfig-engine-setup-start",pubfigEngineLoad:"pubfig-engine-load",pubfigSlotRequested:"pubfig-slotRequested",pubfigStickyFooterSlotRequested:"pubfig-sticky-footer-slotRequested",pubfigSlotRenderEnded:"pubfig-slotRenderEnded",pubfigEngineSetupEnd:"pubfig-engine-setup-end",pubfigStickyFooterSlotRenderEnded:"pubfig-sticky-footer-slotRenderEnded",pubfigPrebidFsRequestBids:"pubfig-prebid-fsRequestBids",pubfigPrebidAuctionInit:"pubfig-prebid-auctionInit",pubfigPrebidAuctionEnd:"pubfig-prebid-auctionEnd",pubfigLoaded:"pubfig-loaded",pubfigInitRequestStart:"pubfig-init-request-start",pubfigInitRequestEnd:"pubfig-init-request-end"};function w(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var y=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=w({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in r)r[a]&&(s+="; "+a,!0!==r[a]&&(s+="="+r[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var s=n[r].split("="),a=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(i[o]=t.read(a,o),e===o)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",w({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,w({},this.attributes,t))},withConverter:function(t){return e(w({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const v=e=>new URLSearchParams(window.location.search).get(e)??"";function k({name:e,value:t,expires:n,path:i,domain:r}){if(!e||!t)return!1;const s={secure:!0};return n&&(s.expires=n),i&&(s.path=i),r&&(s.domain=r),y.set(e,t,s),_({name:e})}function _({name:e}){return y.get(e)}const I=()=>window.location.search.includes("fslog");function S({isActive:e=!1}){window.freestar.debug=!(!e&&!I())&&99}function x(e){return"US"===e.iso&&r.includes(e.state)}function E(e){return!!e&&(i.includes(e.iso)||"QC"===e.state)}function T(e){const t=E(e),n=x(e),i=(({isGDPRCountry:e,isUspApplicable:t,ccpaPrivacyManagerId:n,gdprPrivacyManagerId:i})=>"window._sp_queue = [];window._sp_ = {\n          config: {\n              accountId: 1638,\n              baseEndpoint: 'https://cdn.privacy-mgmt.com',\n              propertyHref: 'https://"+document.location.host+`',\n              ${e?"gdpr: {},":""}\n              ${t?"ccpa: {},":""}\n              events: {\n                  onMessageChoiceSelect: function() {\n                      console.log('[event] onMessageChoiceSelect', arguments);\n                  },\n                  onMessageReady: function() {\n                      console.log('[event] onMessageReady', arguments);\n                  },\n                  onMessageChoiceError: function() {\n                      console.log('[event] onMessageChoiceError', arguments);\n                  },\n                  onPrivacyManagerAction: function() {\n                      console.log('[event] onPrivacyManagerAction', arguments);\n                  },\n                  onPMCancel: function() {\n                      console.log('[event] onPMCancel', arguments);\n                  },\n                  onMessageReceiveData: function() {\n                      console.log('[event] onMessageReceiveData', arguments);\n                  },\n                  onSPPMObjectReady: function() {\n                      console.log('[event] onSPPMObjectReady', arguments);\n                  },\n                  /* Function required for resurfacing links */\n                  onConsentReady: function (message_type, uuid, string, info) {\n                      if (document.getElementById("pmLink")) {\n                          if ((message_type == "ccpa") && (info.applies)) {\n                              /* code to insert the CCPA footer link */\n                              document.getElementById("pmLink").style.visibility = "visible";\n                              document.getElementById("pmLink").innerHTML = "Do Not Sell or Share My Personal Information";\n                              document.getElementById("pmLink").onclick = function () {\n                                  /* Set CCPA ID */\n                                  window._sp_.ccpa.loadPrivacyManagerModal('${n}');\n                              }\n                          }\n                          if ((message_type == "gdpr") && (info.applies)) {\n                              /* code to insert the GDPR footer link */\n                              document.getElementById("pmLink").style.visibility = "visible";\n                              document.getElementById("pmLink").innerHTML = "Privacy Preferences";\n                              document.getElementById("pmLink").onclick = function () {\n                                  /* Set GDPR ID */\n                                  window._sp_.gdpr.loadPrivacyManagerModal('${i}');\n                              }\n                          }\n                      }\n                  },\n                  onError: function() {\n                      console.log('[event] onError', arguments);\n                  },\n              }\n            }\n        }`)({isGDPRCountry:t,isUspApplicable:n,ccpaPrivacyManagerId:freestar.fsdata.ccpaPrivacyManagerId||899036,gdprPrivacyManagerId:freestar.fsdata.gdprPrivacyManagerId||899033});te(null,null,null,i,!1),t&&te(null,null,null,'function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t=function(){var t,e,o=[],n=window,r=n;for(;r;){try{if(r.frames.__tcfapiLocator){t=r;break}}catch(t){}if(r===n.top)break;r=r.parent}t||(!function t(){var e=n.document,o=!!n.frames.__tcfapiLocator;if(!o)if(e.body){var r=e.createElement("iframe");r.style.cssText="display:none",r.name="__tcfapiLocator",e.body.appendChild(r)}else setTimeout(t,5);return!o}(),n.__tcfapi=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return o;"setGdprApplies"===n[0]?n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0)):"ping"===n[0]?"function"==typeof n[2]&&n[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):o.push(n)},n.addEventListener("message",(function(t){var e="string"==typeof t.data,o={};if(e)try{o=JSON.parse(t.data)}catch(t){}else o=t.data;var n="object"===_typeof(o)&&null!==o?o.__tcfapiCall:null;n&&window.__tcfapi(n.command,n.version,(function(o,r){var a={__tcfapiReturn:{returnValue:o,success:r,callId:n.callId}};t&&t.source&&t.source.postMessage&&t.source.postMessage(e?JSON.stringify(a):a,"*")}),n.parameter)}),!1))};"undefined"!=typeof module?module.exports=t:t()}()',!1),n&&te(null,null,null,'(function () { var e = false; var c = window; var t = document; function r() { if (!c.frames["__uspapiLocator"]) { if (t.body) { var a = t.body; var e = t.createElement("iframe"); e.style.cssText = "display:none"; e.name = "__uspapiLocator"; a.appendChild(e) } else { setTimeout(r, 5) } } } r(); function p() { var a = arguments; __uspapi.a = __uspapi.a || []; if (!a.length) { return __uspapi.a } else if (a[0] === "ping") { a[2]({ gdprAppliesGlobally: e, cmpLoaded: false }, true) } else { __uspapi.a.push([].slice.apply(a)) } } function l(t) { var r = typeof t.data === "string"; try { var a = r ? JSON.parse(t.data) : t.data; if (a.__cmpCall) { var n = a.__cmpCall; c.__uspapi(n.command, n.parameter, function (a, e) { var c = { __cmpReturn: { returnValue: a, success: e, callId: n.callId } }; t.source.postMessage(r ? JSON.stringify(c) : c, "*") }) } } catch (a) { } } if (typeof __uspapi !== "function") { c.__uspapi = p; __uspapi.msgHandler = l; c.addEventListener("message", l, false) } })();',!1),te("https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js")}const A=["tcloaded","useractioncomplete"];let C=!1,P=0;const R=function({data:e}){const{eventStatus:t}=e;if(A.includes(t)){const{purpose:t,vendor:n}=e,i=t?t.consents:void 0,r=n?n.consents:void 0;return function({consents:e}){freestar.consentManagement.consentData={consents:{1:e?e[1]:void 0,10:e?e[10]:void 0}}}({consents:i}),function(e,...t){return!(!e||!t)&&t.every((t=>!!e[t]))}(i,1,10)&&function(e,...t){return!(!e||!t)&&t.every((t=>!!e[t]))}(r,850)}};function B({isTCF:e}){if(void 0===freestar.fsdata.comscore||!1!==freestar.fsdata.comscore){window._comscore=window._comscore||[];const t={c1:"2",c2:"23384447"};e||(t.cs_ucfr=""),_comscore.push(t),te("https://sb.scorecardresearch.com/beacon.js")}}const $=function(e,t){if("cmpuishown"===e.eventStatus)return;const n=R({data:e});B({isTCF:!0}),t?!C&&n&&(C=!0,ne()):freestar.log(1,"Error: TCF Callback Failed")},O=function(){return P++,50===P?(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null,void B({isTCF:!1})):P<50&&!window.__tcfapi?(freestar.timers||(freestar.timers={}),void(freestar.timers.tcfapi=setTimeout(O,500))):(freestar.timers&&freestar.timers.tcfapi&&(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null),void window.__tcfapi("addEventListener",2,$))};const D="FREESTAR",M="FS_SOURCEPOINT_PUBFIG",N=(e,t)=>{const n=e===M,i=e===D,r=Boolean(window.__tcfapi),s=Boolean(window.__uspapi),a=x(t)&&!s,o=E(t)&&!r;n&&(a||o)?T(t):i&&(a||o)&&function(){const e=freestar.fsdata.quantcastDomain;if(e){var t="https://cmp.quantcast.com".concat("/choice/","wZt3yQfgdwnz-","/",e,"/choice.js?tag_version=V2"),n=0;te(t),function(){for(var e,t="__tcfapiLocator",n=[],i=window;i;){try{if(i.frames[t]){e=i;break}}catch(e){}if(i===window.top)break;i=i.parent}e||(function e(){var n=i.document,r=!!i.frames[t];if(!r)if(n.body){var s=n.createElement("iframe");s.style.cssText="display:none",s.name=t,n.body.appendChild(s)}else setTimeout(e,5);return!r}(),i.__tcfapi=function(){var e,t=arguments;if(!t.length)return n;if("setGdprApplies"===t[0])t.length>3&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2]&&t[2]("set",!0));else if("ping"===t[0]){var i={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof t[2]&&t[2](i)}else"init"===t[0]&&"object"==typeof t[3]&&(t[3]=Object.assign(t[3],{tag_version:"V2"})),n.push(t)},i.addEventListener("message",(function(e){var t="string"==typeof e.data,n={};try{n=t?JSON.parse(e.data):e.data}catch(e){}var i=n.__tcfapiCall;i&&window.__tcfapi(i.command,i.version,(function(n,r){var s={__tcfapiReturn:{returnValue:n,success:r,callId:i.callId}};t&&(s=JSON.stringify(s)),e&&e.source&&e.source.postMessage&&e.source.postMessage(s,"*")}),i.parameter)}),!1))}();var i=function(){var e=arguments;typeof window.__uspapi!==i&&setTimeout((function(){void 0!==window.__uspapi&&window.__uspapi.apply(window.__uspapi,e)}),500)};if(void 0===window.__uspapi){window.__uspapi=i;var r=setInterval((function(){n++,window.__uspapi===i&&n<3?console.warn("USP is not accessible"):clearInterval(r)}),6e3)}}else freestar.log(10,"loadQuantcast","Could not get quantcastDomain from fsdata, quantcast will not be loaded!")}(),function(e,t,n){const i=t||n;window.fsCmpInitMessage={eventType:"customEvent",args:{eventName:"PRIVACY_COMPLIANCE",eventType:`SITE_HAS_CMP=${i}`,jsonValue:JSON.stringify({cmpType:e,tcfapi:t,uspapi:n})}}}(e,r,s)},j={string:{type:"string",default:""},array:{type:"array",default:[]},object:{type:"object",default:{}},number:{type:"number",default:void 0}};function z({key:e,type:t=j.string.type}){const n=sessionStorage.getItem(e);if(t===j.object.type){if(n){const e=JSON.parse(n);if(e instanceof Object)return e}return j.object.default}if(t===j.array.type){if(n){const e=JSON.parse(n);if(Array.isArray(e))return e}return j.array.default}if(t===j.number.type){const e=Number(n);return Number.isInteger(e)?e:j.number.default}return n}function q({key:e,type:t=j.string,value:n}){n&&(t!==j.object&&t!==j.array||(n=JSON.stringify(n)),sessionStorage.setItem(e,n))}class U{static createInstance({ClassConstructor:e,instanceName:t,params:n=[]}){if(window.freestar=window.freestar||{},window.freestar.instances=window.freestar.instances||{},window.freestar.instances[t])return window.freestar.instances[t];const i=new e(...n);return window.freestar.instances[t]=i,i}static getInstanceFn({ClassConstructor:e,instanceName:t,params:n=[]}){return()=>this.createInstance({ClassConstructor:e,instanceName:t,params:n})}}var L=U.getInstanceFn({ClassConstructor:class{constructor(){this.isReportingActive=z({key:p})||100*Math.random()<1,window.freestar=window.freestar||{},window.freestar.performanceMarksData=window.freestar.performanceMarksData||{pendingMarks:[],processedMarks:[]},this.isFirstLoad=this.getIsFirstLoad()}resetPerformanceLogger(){sessionStorage.removeItem("hasLoadedBefore"),window.freestar.performanceMarksData={pendingMarks:[],processedMarks:[]}}fetchPerformanceMarkDetails({markerName:e,compareToData:t}){const n=performance.getEntriesByName(e,"mark");if(0===n.length)return null;let i;t&&(i=performance.getEntriesByName(t,"mark"));const r=n[0];return{marker_name:r.name,absolute_time:r.startTime.toFixed(2),...this.compareMarks({mark:r,compareToPerformanceMarkData:i})}}compareMarks({mark:e,compareToPerformanceMarkData:t}){if(!t)return{};const n=(e.startTime-t[0].startTime).toFixed(2);return{compared_to:t[0].name,relative_Time:n}}fetchUserDetails(){const{deviceInfo:e,locData:t}=window.freestar,{browser:n,os:i,device:r}=e;return{...t,browser_name:n.name,browser_version:n.version,os_name:i.name,os_version:i.version,device_type:r.type}}getIsFirstLoad(){return null===sessionStorage.getItem("hasLoadedBefore")&&(sessionStorage.setItem("hasLoadedBefore","true"),!0)}sendPerformanceMarkerToQueue({markerName:e,compareTo:t}){if(this.isReportingActive&&!window.freestar.performanceMarksData.processedMarks.includes(e))if(window.freestar.performanceMarksData.processedMarks.push(e),0===t.length){const t=this.fetchPerformanceMarkDetails({markerName:e}),n=this.fetchUserDetails();window.freestar&&window.freestar.msg&&window.freestar.msg.que&&window.freestar.msg.que.push({eventType:"customEvent",args:{eventType:"PERFORMANCE",jsonValue:JSON.stringify({...t,...n,is_first_load:this.isFirstLoad,pubfig_version:window.freestar.version}),eventName:e.toUpperCase()}})}else t.forEach((t=>{const n=this.fetchPerformanceMarkDetails({markerName:e,compareToData:t}),i=this.fetchUserDetails();window.freestar&&window.freestar.msg&&window.freestar.msg.que&&freestar.msg.que.push({eventType:"customEvent",args:{eventType:"PERFORMANCE",jsonValue:JSON.stringify({...n,...i,is_first_load:this.isFirstLoad,pubfig_version:window.freestar.version}),eventName:e.toUpperCase()}})}))}pushAllPendingMarksToMsgQue(){window.freestar.performanceMarksData.pendingMarks.forEach((e=>{this.sendPerformanceMarkerToQueue(e)}))}logMark({markerName:e,compareTo:t=[],isFreestarDataCollectorInitialized:n=!0}){performance.mark(e),n&&window.freestar.deviceInfo&&window.freestar.locData?this.sendPerformanceMarkerToQueue({markerName:e,compareTo:t}):window.freestar.performanceMarksData.pendingMarks.push({markerName:e,compareTo:t})}logPerformanceMarkers(){const e=performance.getEntriesByType("mark");for(const t of e)console.log(`Mark [${t.name}]: ${t.startTime.toFixed(2)}ms`)}},instanceName:"performanceLogger"});function F(e){const{name:t,detail:n}=e,i=new CustomEvent(t,{detail:n});window.dispatchEvent(i)}const V={current:"current",fsLoadPubfigUrlparams:"fsLoadPubfigUrlparams"},G="fs-playwright-tests-script",W="fs-ab-tests-script",H="fsaltconfig",J="fs-qa";class Q{constructor(){window._pubfigInstanceManagerConfig=window._pubfigInstanceManagerConfig||{},this.config=window._pubfigInstanceManagerConfig,this.fsLoadPubfigVersionUrlParams=v("fsLoadPubfigVersion")||"",this.fsAltConfigUrlParams=v("fsaltconfig"),this.isQA=v("fsdebug")}setEngineLocation(e){Object.values(V).includes(e)&&(this.config.engineLocation=e)}getEngineLocation(){return this.config.engineLocation===V.fsLoadPubfigUrlparams?`https://a.pub.network/core/pubfig/${this.fsLoadPubfigVersionUrlParams}/pubfig.engine.js`:"https://a.pub.network/core/pubfig/5.39.5/pubfig.engine.js"}checkForAlternativeInstances({isTest:e,performanceLogger:t}={isTest:"",performanceLogger:{resetPerformanceLogger:()=>{}}}){if(this.fsLoadPubfigVersionUrlParams&&!this.config.loadPubfigVersionRedirect)return this.config.loadPubfigVersionRedirect=!0,this.setEngineLocation(V.fsLoadPubfigUrlparams),t.resetPerformanceLogger(),X({id:G,src:`https://a.pub.network/core/pubfig/${this.fsLoadPubfigVersionUrlParams}/pubfig.min.js`,errorString:"PLAYWRIGHTS TEST FOUND - exiting after creating new instance..."});if(e&&e.length)return t.resetPerformanceLogger(),this.setEngineLocation(V.current),window.freestar.redirected=!0,X({id:W,src:e,errorString:"AB TEST FOUND - exiting after creating new instance..."});const n=[].slice.call(document.querySelectorAll(`script#${H}`));if(this.fsAltConfigUrlParams&&0===n.length)return t.resetPerformanceLogger(),this.setEngineLocation(V.current),X({id:H,src:`https://a.pub.network/${a()}/test/${this.fsAltConfigUrlParams}/pubfig.min.js?bypass=true`,errorString:"Alternate Configuration - found alt version, exiting after creating new instance..."});if(this.isQA&&!this.config.fsQaRedirect){let e;if(this.config.fsQaRedirect=!0,document.querySelectorAll("script").forEach((t=>{t.innerText.includes("qa/pubfig")&&(e=!0)})),!e)return t.resetPerformanceLogger(),this.setEngineLocation(V.current),X({id:J,src:`https://a.pub.network/${a()}/qa/pubfig.min.js`,errorString:"QA version called via params - exiting after creating new instance..."})}}}let K=null;function Z(){return K||(K=new Q),K}function Y(){if("object"!=typeof window.freestar.fsdata)throw new Error("The fsdata object is not properly defined, exiting...");if(window.freestar.fsdata.onlyAllowedDomains&&window.freestar.fsdata.allowedDomains&&window.freestar.fsdata.allowedDomains.length&&!function({domains:e}){let t=0===e.length;return e.forEach((e=>{0===e.indexOf("*.")&&(e=e.slice(2)),t||(t=-1!==top.location.host.indexOf(e))})),!(!t&&fsdata.onlyAllowedDomains)}({domains:window.freestar.fsdata.allowedDomains}))throw new Error("The current domain is not in the allowed domains list, exiting...");if(window.freestar.fsdata.urlBlocklist&&window.freestar.fsdata.urlBlocklist.length&&function(e){const t=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/,n=e=>{try{return new URL(e),!0}catch(e){return!1}},i=e=>{const n=e.split("/");return t.test(n[0])},{href:r,pathname:s,host:a,search:o}=top.location,d=(e,t)=>e.includes("/*")?r.includes(e.replace("/*","")):t,l=e=>"/"===e[e.length-1]?e.substring(0,e.length-1):e;return e.find((e=>n(e)?d(e,l(r)===l(e)):i(e)?d(e,l(a+s+o)===l(e)):s.includes(e)))}(window.freestar.fsdata.urlBlocklist))throw new Error("The current domain is in the blocked url list, exiting...")}function X({id:e,src:t,errorString:n}){const i=ee({type:"script",id:e,src:t});throw window.freestar.fsdata=null,document.head.appendChild(i),new Error(n)}function ee({type:e="div",classList:t=[],id:n=!1,src:i=!1,name:r=!1,attributes:s=[]}){const a=document.createElement(e);return t.length&&(a.className=t.join(" ")),i&&(a.src=i),n&&(a.id=n),r&&a.setAttribute("name",r),s.length&&s.forEach((e=>{const t=Object.keys(e)[0];a.setAttribute(t,e[t])})),a}function te(e,t,n=null,i,r=!0){try{const s=ee({type:"script",attributes:[{"data-owner":"freestar"}]});e&&(s.src=e),i&&(s.textContent=i),n&&(s.id=n),r&&(s.async=r),s.type="text/javascript",t&&(s.onload=t),document.getElementsByTagName("head")[0].appendChild(s)}catch(e){}}function ne(){if(L().logMark({markerName:b.pubfigEngineLoadInit}),freestar.modulesLoaded.engine)return freestar.log(0,"========== ENGINE ALREADY LOADED =========="),!1;let e=window.fsprebid||{};if(window.fsprebid=e,e.que=e.que||[],e.retries=0,freestar.fsdata.disallowedGeos&&freestar.fsdata.disallowedGeos.length&&freestar.fsdata.disallowedGeos.includes(freestar.locData.iso))freestar.log(0,"Ad serving is blocked in "+freestar.locData.iso);else{if(freestar.modulesLoaded.engine)return freestar.log(0,"========== ENGINE ALREADY LOADED =========="),!1;te(Z().getEngineLocation(),ie),freestar.pubfigState.configReady=!0,F({name:"pubfigRunEngine",detail:!0})}}function ie(){freestar.globalUnderscore&&(window._=freestar.globalUnderscore)}function re(e){Math.random()<.01&&freestar.msg.que.push({eventType:"customEvent",args:{eventName:"PUBFIG_NOT_LOADED",eventType:e||"",jsonValue:JSON.stringify({domain:window.location.hostname})}})}function se(){!function(){if(window.freestar.config.disabledProducts)for(const e in window.freestar.config.disabledProducts)Object.prototype.hasOwnProperty.call(window.freestar.config.disabledProducts,e)&&(void 0===window.freestar.config.products[e]?console.error(`Freestar product name: ${e} does not exist.`):window.freestar.config.products[e].disabled=window.freestar.config.disabledProducts[e])}(),i.indexOf(freestar.locData.iso)>-1?O():(B({isTCF:!1}),ne())}var ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function oe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function de(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var le=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===ce}(e)}(e)};var ce="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ue(e,t){return!1!==t.clone&&t.isMergeableObject(e)?he((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function fe(e,t,n){return e.concat(t).map((function(e){return ue(e,n)}))}function pe(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function ge(e,t){try{return t in e}catch(e){return!1}}function me(e,t,n){var i={};return n.isMergeableObject(e)&&pe(e).forEach((function(t){i[t]=ue(e[t],n)})),pe(t).forEach((function(r){(function(e,t){return ge(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(ge(e,r)&&n.isMergeableObject(t[r])?i[r]=function(e,t){if(!t.customMerge)return he;var n=t.customMerge(e);return"function"==typeof n?n:he}(r,n)(e[r],t[r],n):i[r]=ue(t[r],n))})),i}function he(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||fe,n.isMergeableObject=n.isMergeableObject||le,n.cloneUnlessOtherwiseSpecified=ue;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):me(e,t,n):ue(t,n)}he.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return he(e,n,t)}),{})};var be=oe(he);let we=v("fsdebug"),ye=[];we&&"true"!==we&&!Number.isInteger(+we)&&(ye=we.split(",").map((e=>e.toUpperCase())));const ve=(e,...t)=>{let n="Pubfig",i="background: #00C389; color: #fff; border-radius: 3px; padding: 3px";"object"==typeof e&&(n=e.title?e.title:n,i=e.styles?e.styles:i,e=void 0!==e.level?e.level:1),(freestar.debug>=e&&0===ye.length||ye.includes(n.toUpperCase()))&&console.info(`%c${n}: `,i,...t)},ke={title:"Pubfig"};class _e{constructor(){this.logs=[]}add(e){this.logs.push(e)}show(e=ke){if(!freestar.log)return;if(0===this.logs.length)return;let t=this.logs;this.logs=[],freestar.log(e,`\n${t.join("\n")}`)}}let Ie;const Se=new Uint8Array(16);function xe(){if(!Ie&&(Ie="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ie(Se)}const Ee=[];for(let e=0;e<256;++e)Ee.push((e+256).toString(16).slice(1));var Te={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ae(e,t,n){if(Te.randomUUID&&!t&&!e)return Te.randomUUID();const i=(e=e||{}).random||(e.rng||xe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return Ee[e[t+0]]+Ee[e[t+1]]+Ee[e[t+2]]+Ee[e[t+3]]+"-"+Ee[e[t+4]]+Ee[e[t+5]]+"-"+Ee[e[t+6]]+Ee[e[t+7]]+"-"+Ee[e[t+8]]+Ee[e[t+9]]+"-"+Ee[e[t+10]]+Ee[e[t+11]]+Ee[e[t+12]]+Ee[e[t+13]]+Ee[e[t+14]]+Ee[e[t+15]]}(i)}const Ce=20,Pe="adRefreshRate",Re="visibilityRefreshTime";function Be(e,t){if(e.refreshOptIn&&function(e){return!(!e||null==e.turboActive)&&e.turboActive}(t)){const n=function(e){return e&&e.percentReduction}(t);freestar.log(20,`TURBO MODE active! Applying ${n}% reduction to refresh rates!`);const i=(e,t)=>function(e,t,n,i){if(null==e||Number.isNaN(e)||e<=0)return freestar.log(20,`TURBO: ${i} refreshRate ${e} unchanged`),e;let r=Math.floor(e*(100-t)/100);return(null==r||Number.isNaN(r)||r<n)&&(r=n),freestar.log(20,`TURBO: ${i} ${e} has been updated to ${r}`),r}(e,n,Ce,t);Object.prototype.hasOwnProperty.call(e,Pe)&&(e[Pe]=i(e[Pe],Pe)),Object.prototype.hasOwnProperty.call(e,Re)&&(e[Re]=i(e[Re],Re))}}const $e=U.getInstanceFn({ClassConstructor:class{constructor(){this.results={},this.ongoingRequests=new Map}clearClassCachedData({requestId:e}){Object.prototype.hasOwnProperty.call(this.results,e)&&delete this.results[e]}async fetch({fetchFn:e,requestId:t,onError:n,onSuccess:i}){if(this.results[t])return this.results[t];if(!this.ongoingRequests.has(t)){const r=e().then((e=>{const n={data:e,error:null};return this.results[t]=n,i&&i(e),n}),(e=>{const i={data:null,error:e};return this.results[t]=i,n&&n(e),i}));this.ongoingRequests.set(t,r)}return this.ongoingRequests.get(t).finally((()=>{this.ongoingRequests.delete(t)}))}get({requestId:e}){return this.results[e]}},instanceName:"requestHandler"});function Oe({key:e}){const t=z({key:e,type:j.object.type});if(t){const{value:n,expiry:i}=t;if(i&&!(i<Date.now()))return n;!function({key:e}){sessionStorage.removeItem(e)}({key:e})}return null}function De({key:e,value:t}){!function({key:e,value:t,expiry:n}){q({key:e,type:j.object,value:{value:t,expiry:n}})}({key:e,value:t,expiry:Date.now()+36e5})}const Me=({placement:e,type:t})=>(({placement:e,type:t})=>{let n=e&&e[t]&&null!=e[t].active&&!1!==e[t].active;return!(n||!("dynamicAdOptionsV2"===t&&e[t].dynamicAd2||"pushdownOptions"===t&&e[t].isPushdownUnit||"sideWallOptions"===t&&0!==e[t].type||"stickyAdOptions"===t&&e[t].stickyAdEnabled||"stickyFooterOptions"===t&&Object.keys(e[t]).length>0&&!1!==e[t].active))||n})({placement:e,type:t})?e[t]:{};function Ne({slotId:e}){function t(){const t=Gn({name:e});return t&&t.name?t.name:"unknown"}return e?freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:(freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[e],t()):"unknown"}function je({path:e}){return e?window.freestar.dynamicPathLibrary.find((t=>t.path===e)):"unknown"}function ze({placementName:e,slotId:t,path:n}){t&&function({placementName:e,slotId:t}){e&&t&&(freestar.dynamicSlotLibrary||(freestar.dynamicSlotLibrary={}),freestar.dynamicSlotLibrary[t]=e)}({placementName:e,slotId:t}),n&&function({placementName:e,path:t}){e&&t&&(window.freestar.dynamicPathLibrary||(freestar.dynamicPathLibrary=[]),window.freestar.dynamicPathLibrary.push({placementName:e,path:t}))}({placementName:e,path:n})}function qe({slotId:e=null,path:t=null}){return e?Ne({slotId:e}):!!t&&je({path:t})}var Ue=Function.prototype.toString,Le=Object.create,Fe=Object.prototype.toString,Ve=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},e}();var Ge="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new Ve};function We(e){if(!e)return Le(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:Le(e);if(~Ue.call(t).indexOf("[native code]"))try{return new t}catch(e){}return Le(e)}var He="g"===/test/g.flags?function(e){return e.flags}:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Je(e){var t=Fe.call(e);return t.substring(8,t.length-1)}var Qe="undefined"!=typeof Symbol?function(e){return e[Symbol.toStringTag]||Je(e)}:Je,Ke=Object.defineProperty,Ze=Object.getOwnPropertyDescriptor,Ye=Object.getOwnPropertyNames,Xe=Object.getOwnPropertySymbols,et=Object.prototype,tt=et.hasOwnProperty,nt=et.propertyIsEnumerable,it="function"==typeof Xe;var rt=it?function(e){return Ye(e).concat(Xe(e))}:Ye;function st(e,t,n){for(var i=rt(e),r=0,s=i.length,a=void 0,o=void 0;r<s;++r)if("callee"!==(a=i[r])&&"caller"!==a)if(o=Ze(e,a)){o.get||o.set||(o.value=n.copier(o.value,n));try{Ke(t,a,o)}catch(e){t[a]=o.value}}else t[a]=n.copier(e[a],n);return t}function at(e,t){return e.slice(0)}function ot(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach((function(e,i){n.set(i,t.copier(e,t))})),n}var dt=it?function(e,t){var n=We(t.prototype);for(var i in t.cache.set(e,n),e)tt.call(e,i)&&(n[i]=t.copier(e[i],t));for(var r=Xe(e),s=0,a=r.length,o=void 0;s<a;++s)o=r[s],nt.call(e,o)&&(n[o]=t.copier(e[o],t));return n}:function(e,t){var n=We(t.prototype);for(var i in t.cache.set(e,n),e)tt.call(e,i)&&(n[i]=t.copier(e[i],t));return n};function lt(e,t){return new t.Constructor(e.valueOf())}function ct(e,t){return e}function ut(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach((function(e){n.add(t.copier(e,t))})),n}var ft=Array.isArray,pt=Object.assign,gt=Object.getPrototypeOf||function(e){return e.__proto__},mt={array:function(e,t){var n=new t.Constructor;t.cache.set(e,n);for(var i=0,r=e.length;i<r;++i)n[i]=t.copier(e[i],t);return n},arrayBuffer:at,blob:function(e,t){return e.slice(0,e.size,e.type)},dataView:function(e,t){return new t.Constructor(at(e.buffer))},date:function(e,t){return new t.Constructor(e.getTime())},error:ct,map:ot,object:dt,regExp:function(e,t){var n=new t.Constructor(e.source,He(e));return n.lastIndex=e.lastIndex,n},set:ut},ht=pt({},mt,{array:function(e,t){var n=new t.Constructor;return t.cache.set(e,n),st(e,n,t)},map:function(e,t){return st(e,ot(e,t),t)},object:function(e,t){var n=We(t.prototype);return t.cache.set(e,n),st(e,n,t)},set:function(e,t){return st(e,ut(e,t),t)}});function bt(e){var t=function(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:lt,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:lt,Object:e.object,Promise:ct,RegExp:e.regExp,Set:e.set,String:lt,WeakMap:ct,WeakSet:ct,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}(pt({},mt,e)),n=t.Array,i=t.Object;function r(e,r){if(r.prototype=r.Constructor=void 0,!e||"object"!=typeof e)return e;if(r.cache.has(e))return r.cache.get(e);if(r.prototype=gt(e),r.Constructor=r.prototype&&r.prototype.constructor,!r.Constructor||r.Constructor===Object)return i(e,r);if(ft(e))return n(e,r);var s=t[Qe(e)];return s?s(e,r):"function"==typeof e.then?e:i(e,r)}return function(e){return r(e,{Constructor:void 0,cache:Ge(),copier:r,prototype:void 0})}}bt(pt({},ht,{}));var wt=bt({});const yt=["click","scroll"],vt={},kt=()=>void 0!==window.freestar.config.pageSpeedOptimized?window.freestar.config.pageSpeedOptimized:window.freestar.fsdata.pageSpeedOptimized,_t=()=>{yt.forEach((e=>document.removeEventListener(e,_t)))},It=({name:e,callback:t})=>{vt[e].waiting&&!vt[e].called&&(vt[e].called=!0,_t(),t())},St=({name:e,callback:t})=>{Object.prototype.hasOwnProperty.call(vt,e)||(vt[e]={waiting:!0},yt.forEach((n=>document.addEventListener(n,It.bind(null,{name:e,callback:t}),{once:!0}))))};class xt{constructor(e){this.adSlotId=e.getSlotElementId(),this.size=e.getSizes().map((e=>"fluid"===e?[1,1]:[e.getWidth(),e.getHeight()])),this.adUnitPath=e.getAdUnitPath()}}function Et({slotArray:e}){window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.queue.push({adSlots:e,dataHandler:function(){window.__iasPET.setTargetingForGPT()}})}function Tt({slot:e=null}){void 0!==window.__iasPET&&(freestar.log(1,"Publisher SlotOperations IAS: iasPETTargeting found"),e?Et({slotArray:[new xt(e)]}):function(){const e=[];On().forEach((t=>e.push(new xt(t)))),e.length&&Et({slotArray:e})}())}function At({slot:e=null}){Tt({slot:e}),function({slot:e=null}){window.moatPrebidApi&&("function"==typeof window.moatPrebidApi.slotDataAvailable&&window.moatPrebidApi.slotDataAvailable()||"function"==typeof window.moatPrebidApi.pageDataAvailable&&window.moatPrebidApi.pageDataAvailable())&&(freestar.log(1,"Publisher SlotOperations Moat: moatSlotTargetingReady"),e?window.top.moatPrebidApi.setMoatTargetingForSlot(e):window.moatPrebidApi.setMoatTargetingForAllSlots())}({slot:e})}const Ct="fs.idealadstack.config",Pt="session storage",Rt="network request",Bt={title:"IDEAL AD STACK v3.0"};window.freestar=window.freestar||{};const $t=U.getInstanceFn({ClassConstructor:class{constructor(){this.active=!0,this.config=null,this.configByRtt=null,this.refreshCallback=this.refreshData.bind(this),this.refreshingInProgress=!0,this.logs=new _e,this.init(),this.setupBypassFirstAuction(),this.asyncInit()}init(){let e,t,n;const i=$e().get({requestId:"getIdealData"});if(i)({config:e,source:t,errors:n}=this.parseRequestHandlerResult(i));else{const i=Oe({key:Ct});i?(e=i,n=[],t=Pt):(e={},n=["data not yet available"],t=Rt)}this.logs.add(`Got config from ${t}`),n.length>0&&(this.sendErrorMessage(n),this.logs.add("Config invalid!",JSON.stringify(e))),this.setConfig(e),this.setKVPs(),this.logs.show(Bt)}setConfig(e){this.config=e,this.setConfigByRtt()}sendErrorMessage(e){window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"ERRORS",jsonValue:JSON.stringify({errors:e.join(", ")})}})}async asyncInit(){const e=await $e().fetch({requestId:"getIdealData",fetchFn:ei}),{config:t,source:n,errors:i}=this.parseRequestHandlerResult(e);n===Rt&&0===i.length&&De({key:Ct,value:t}),t.knownUser||this.bindEvents(),this.refreshingInProgress=!1}async refreshData(){if(this.refreshingInProgress)return;this.refreshingInProgress=!0;const e=await $e().fetch({requestId:"getIdealData",fetchFn:ei});if(!this.parseRequestHandlerResult(e).config.knownUser&&Hn.isKnown()){$e().clearClassCachedData({requestId:"getIdealData"});const e=await $e().fetch({requestId:"getIdealData",fetchFn:Xn}),{config:t,source:n,errors:i}=this.parseRequestHandlerResult(e);n===Rt&&0===i.length&&(De({key:Ct,value:t}),window.freestar.queue.push((()=>{window.fsprebid.offEvent("auctionEnd",this.refreshCallback)})))}this.refreshingInProgress=!1}bindEvents(){window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.fsprebid.onEvent("auctionEnd",this.refreshCallback)}))}parseRequestHandlerResult(e){let t,n,i;const{data:r,error:s}=e;return s?(t={},i=[s.toString()]):(({data:t,source:n}=r),i=n===Rt?this.getErrors(t):[]),{config:t,source:n,errors:i}}getConfigByRtt(){return this.configByRtt}setConfigByRtt(){let e,t;if(null!=this.config.roundTripTime&&(t=Number(this.config.roundTripTime),!Number.isNaN(t)&&this.config.clientServerRTT))for(const n of this.config.clientServerRTT)t<n.lessThan&&(null==e||e.lessThan>n.lessThan)&&(e=n);this.configByRtt=(e||this).config}getActiveClientBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"client"===e[t]))}getActiveServerBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"server"===e[t]))}getActiveBidders(){return[...this.getActiveClientBidders()].concat(this.getActiveServerBidders())}getInactiveBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"off"===e[t]))}getAllBidders(){let{clientServer:e={}}=this.config;return Object.keys(e)}getServerToServerDetails(){if(!this.active)return{};let{testGroup:e}=this.config,{clientServerMask:t}=this.getConfigByRtt();const n=this.getActiveServerBidders();return{activeBidders:this.getActiveBidders(),serverToServerNetworks:n,clientServerMask:t,testGroup:e}}getDynamicAuctionTimeoutDetails(){const{maxTimeout:e=window.freestar.fsdata.timeout,roundTripTime:t=null}=this.config;return{maxTimeout:e,roundTripTime:t}}getMaxAuctionTimeout(){const{maxTimeout:e}=this.getDynamicAuctionTimeoutDetails();return e}setKVPs(){const{roundTripTime:e=null}=this.getDynamicAuctionTimeoutDetails(),{clientServerMask:t=null,testGroup:n=null}=this.getServerToServerDetails();freestar.queue.push((()=>{googletag.pubads().setTargeting("floors_user",String(Hn.isKnown())),e&&googletag.pubads().setTargeting("floors_rtt",`${e}`),t&&googletag.pubads().setTargeting("fs_clientservermask",`${t}`),n&&googletag.pubads().setTargeting("fs_testgroup",`${n}`)})),this.logs.add(`fs_clientservermask: ${t}\nfs_testgroup: ${n}\nfloors_user: ${Hn.isKnown()}\nfloors_rtt: ${e}`)}getErrors(e){const t=[];return 0===Object.keys(e).length?t.push("no params"):void 0===e.maxTimeout&&t.push("no maxTimeout"),t}async getFloorsData(){const e=await $e().fetch({requestId:"getIdealData",fetchFn:ei}),{config:t}=this.parseRequestHandlerResult(e);return t&&t.floors}getBypassFirstAuction(){const e=this.getConfigByRtt();return!!e&&"off"===e.preGAMAuction}async setupBypassFirstAuction(){this.getBypassFirstAuction()&&fsprebid&&fsprebid.que&&fsprebid.que.push((function(){fsprebid.removeAdUnit()}))}getFeatureConfig(){return this.config&&this.config.features||{}}allowBrowsi(){return"off"!==this.getFeatureConfig().browsi}allowConfiant(){return"off"!==this.getFeatureConfig().confiant}allowBlockthrough(){return"off"!==this.getFeatureConfig().blockthrough}checkBidders(){const e=this.getInactiveBidders(),t=[...new Set(window.freestar.fsdata.placements.map((e=>e.bidders)).flat().map((e=>e.bidder)))].filter((t=>e.includes(t)));t.length&&(freestar.log(1,"Found bidders",JSON.stringify(t),"which should be off!"),this.sendErrorMessage(["placement bidder setup does not match IdealAdStack config"]))}},instanceName:"idealAdstackManager"}),Ot="4e799501-b8b6-4ef1-bad5-225b3dd1aa8d",Dt="https://api.floors.dev/sgw/v1/floors";function Mt(e){return e.bidders&&e.bidders.some((({bidder:e})=>"amazon"===e))}function Nt(e){let t=qn();for(let n=0;n<t.length;n++)if(t[n].dfpId===e)return t[n];return null}function jt(e){let t=[];if(e)for(let n=0;n<e.length;n++){let i=null;try{i=freestar.dynamicSlotLibrary[e[n].getSlotElementId()],i&&(i=Gn({name:i})),i||(i=freestar.fsdata.placements.filter((t=>{if(e[n].getSlotElementId()===t.slotId)return t})),0===i.length&&(i=null)),i||(i=Nt(e[n].getAdUnitPath()))}catch(e){freestar.log(1,`Error: ${e}`)}if(i&&Mt(i)){const r=i.sizeMappings.find((e=>zn()>=e.viewport.size[0]));let s=r?r.size:[];if(s.length>0&&(s=s.filter((e=>35843!==e[0]))),s.length>0){const i=e[n],r={slotID:i.getSlotElementId(),slotName:i.getAdUnitPath(),sizes:s};t.push(wt(r))}}}else t=qn().filter((e=>Mt(e)&&function(e){if(!e.validAdSizes||!e.bidders||0===e.bidders.length||e.stickyFooter||e.dynamicAd)return!1;return function(e){return void 0===freestar.config||void 0===freestar.config.enabled_slots||function(e,t){for(let n=0;n<e.length;n++)if(e[n].placementName===t){if("complete"!==document.readyState)return!0;if(window.document.getElementById(t))return!0}return!1}(freestar.config.enabled_slots,e.name)}(e)}(e))).map((e=>function(e){const t=e.sizeMappings.find((e=>zn()>=e.viewport.size[0]));let n=t?t.size:[];return n=n.filter((e=>35843!==e[0])),wt({slotID:e.name,slotName:e.dfpId,sizes:n})}(e)));return t}function zt(e,t,n,i){if(!(e=function({elementIds:e}){return e&&e.length?(Array.isArray(e)||(e=[e]),!(!e||!e.length)&&e):freestar.fsdata.placements.map((e=>{if(e.validAdSizes&&!e.stickyFooter&&!e.pushdownUnit&&0===e.sideWallType&&document.getElementById(e.name))return e.name})).filter((e=>void 0!==e))}({elementIds:e}))||!e.length)return;F({name:"auctionStarted",detail:!0}),L().logMark({markerName:b.pubfigPrebidFsRequestBids});const r=n||window.freestar.fsdata.timeout,s={prebid:!1,aps:!1,adserverRequestSent:!1};function a(e){freestar.debug&&freestar.debug>24&&"prebid"===e&&setTimeout((()=>{(()=>{const e=fsprebid.getBidResponses(),t=fsprebid.getAllWinningBids(),n=[];Object.keys(e).forEach((function(i){e[i].bids.forEach((function(e){n.push({bid:e,adunit:i,adId:e.adId,bidder:e.bidder,time:e.timeToRespond,dims:`${e.width}x${e.height}`,cpm:e.cpm,msg:e.status,rendered:!!t.find((function(t){return t.adId==e.adId}))})}))}))})()}),1500),freestar.log(1," ("+freestar.requestReference.requestNum+") Bidder back:",e),s.prebid&&s.aps&&l()}function o(e){let t,n,i=!0;const r=fsprebid.getBidResponses()[e.domId],s=Gn({name:qe({slotId:e.placementName})});return r&&s?(n=function(e,t){const n=Math.max(...e.map(t));return e.find((e=>t(e)===n))}(r.bids,(function(e){return Number(e.cpm)})),t=s[`floor${freestar.deviceInfo.device.type.charAt(0).toUpperCase()+freestar.deviceInfo.device.type.slice(1)}`],"number"==typeof t&&t>0&&n&&n.cpm&&n.cpm<t&&(i=!1),i):i}function d(e){return freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:e}function l(){!0!==s.adserverRequestSent&&(s.adserverRequestSent=!0,freestar.requestReference.bidTimer&&clearTimeout(freestar.requestReference.bidTimer),freestar.log(2," ("+freestar.requestReference.requestNum+") Sending adserver request!"),googletag.cmd.push((function(){const t={activeIds:[],activeSlots:[]};if(Array.isArray(e)&&e.length){const n=[];freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh Only:",e),freestar.amazonNetwork&&apstag.setDisplayBids(e),e.forEach((e=>{let t=document.getElementById(e);if(t){const e=Gn({name:qe({slotId:t.getAttribute("name")})});e&&n.push(e.name)}}));const i=function(){const t={activeIds:[],activeSlots:[]};return e.forEach((e=>{const n=Dn({elementId:e});n&&t.activeSlots.push(n),o({placementName:d(e),domId:e})&&t.activeIds.push(e)})),t}();t.activeIds=i.activeIds,t.activeSlots=i.activeSlots}else freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh All!"),freestar.amazonNetwork&&apstag.setDisplayBids(),t.activeIds=function(){const e=[];return On().forEach((t=>{const n=t.getSlotElementId();freestar.bidsWon&&freestar.bidsWon[n]&&!freestar.bidsWon[n]&&(freestar.bidsWon[n].evaluated=!0,o({placementName:d(n),domId:n})&&e.push(n))})),e}();const n=function(){let e=_({name:"_fs-test"});return e&&(e=JSON.parse(e),e.items.some(((t,n)=>{t==e.selection&&(e.selected=n,e.testGroup=t.indexOf("ab_test")>-1?1:0)}))),e}();n&&(freestar.log(1,"Part of an A/B test... ",n),function({key:e,value:t}){window.googletag.pubads&&window.googletag.pubads().setTargeting(e,t)}({key:"fs_test_variant_id",value:String(n.testGroup)})),t.activeSlots.length&&(t.activeIds.length&&fsprebid.setTargetingForGPTAsync(t.activeIds),function(e){if(freestar.debug<50)return;freestar.log(25,"GPT Targeting - START ************************");let t=googletag.pubads().getTargetingKeys();for(let e=0;e<t.length;e++){let n=googletag.pubads().getTargeting(t[e]);freestar.log(25,"GPT Targeting - "+t[e]+" = "+n)}e?Array.isArray(e)||(e=[e]):e=On();for(let n=0;n<e.length;n++){let i=e[n],r=i.getSlotElementId();t=i.getTargetingKeys();for(let e=0;e<t.length;e++){let n=i.getTargeting(t[e]);freestar.log(25," GPT Targeting - Slot ("+r+")- "+t[e]+" = "+n)}}freestar.log(25," GPT Targeting - END **************************")}(t.activeSlots),function(e){!0===freestar.googletagCorrelatorUpdate?(googletag.pubads().refresh(e),freestar.googletagCorrelatorUpdate=!1):googletag.pubads().refresh(e,{changeCorrelator:!1})}(t.activeSlots),function(e=On()||[]){if(freestar.debug<2)return;e.forEach((e=>function(e,t){const n=document.getElementById(e);if(n){let e=ee("div"),i=document.createTextNode("FS - "+t);e.appendChild(i),n.insertBefore(e,n.childNodes[0])}}(e.getSlotElementId(),e.getAdUnitPath())))}(t.activeSlots)),i&&i()})))}freestar.requestReference.bidTimer=null,freestar.requestReference.requestNum=++freestar.bidRequestNum,function(e,t,n){freestar.amazonNetwork&&e.length?freestar.amazonNetwork&&(freestar.log(1,"valid Amazon Slots :",e),apstag.fetchBids({slots:e,timeout:n||1e3},(function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") aps bids:",e),s.aps=!0,a("aps")}))):(freestar.log(1,"no valid Amazon Slots : no amazon bidding"),s.aps=!0,a("aps"));const i={timeout:n||1e3,bidsBackHandler:function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") prebid bid responses:",e),s.prebid=!0,a("prebid")}};t&&(i.adUnitCodes=t),fsprebid.que.push((function(){fsprebid.requestBids(i)}))}(jt(t),e,r),freestar.requestReference.bidTimer=window.setTimeout((function(){freestar.log(1," ("+freestar.requestReference.requestNum+") TIMEOUT!"),function({adUnitCodesWithNoBids:e,isTimeout:t}){On().forEach((n=>{if(t)n.setTargeting("fsbid","timeout");else if(e){const t=n.getAdUnitPath(),i=Un({adUnitPath:t});i&&e.indexOf(i.name)>-1&&n.setTargeting("fsbid","0")}}))}({isTimeout:!0}),l()}),r)}const qt=function({name:e}){return!(!window.freestar.config.products[e]||!window.freestar.config.products[e].disabled)&&(window.freestar.log(1,`${s[e].prettyName} Disabled via freestar.config.products.${e}.disabled`),!0)};class Ut{constructor(){this.slug="fsxs2s"}addToPlacementAsBidder(){return{bidder:this.slug,params:{}}}getSlug(){return this.slug}hasTopLevelStoredRequest(){const{topLevelStoredRequestId:e}=window.freestar.fsdata;return e&&e.length}hasImpLevelStoredRequests(){const{placements:e}=window.freestar.fsdata;return e.filter((e=>e.storedRequestId&&e.storedRequestId.length)).length}hasValidStoredRequests(){return this.hasImpLevelStoredRequests()||this.hasTopLevelStoredRequest()}}function Lt(e){let t={},i=wt({code:e.name,sizes:e.sizes,mediaTypes:null,bids:e.bidders}),r=Qt(e);i.ortb2Imp={ext:{data:{fs_ad_product:r}},tagid:e.name},e.storedRequestId&&(i.ortb2Imp.ext.prebid={storedrequest:{id:e.storedRequestId}});let s=!1;if(e.sizeMappings.forEach((i=>{!s&&zn()>=i.viewport.size[0]&&(i.mediaTypes.forEach((r=>{var s;void 0===t[r]&&(t[r]={}),void 0===t[r].sizes&&(t[r].sizes=[]),i.size.forEach((e=>{if(e[0]<35843){if(("banner"===r||"native"===r)&&"302x170, 443x250, 554x312, 640x360".includes(`${e[0]}x${e[1]}`))return;t[r].sizes.push(e)}})),t[r].sizes=(s=t[r].sizes,[...new Set(s)]);const a=n.map((e=>e.join("x")));let o=[];const d=z(jn);e.networks&&e.networks.forEach((e=>{(function({network:e,adQualityBlockList:t}){if(function({value:e}){return e&&Array.isArray(e)&&e.length>0}({value:t}))return!t.includes(e.slug);return!0})({network:e,adQualityBlockList:d})&&e.sizes&&e.sizes.forEach((e=>{e.size.forEach((e=>{o.push(e)}))}))}));const l=o.filter((e=>Array.isArray(e))).map((e=>e.join("x"))),c=e.sizes.filter((e=>Array.isArray(e))).map((e=>e.join("x")));t[r].sizes=t[r].sizes.filter((e=>{if(-1!==a.indexOf(e.join("x"))||-1!==c.indexOf(e.join("x"))&&-1!==l.indexOf(e.join("x")))return e})),t[r].sizes=t[r].sizes.sort(((e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0)),"native"===r&&(t[r]=Object.assign(t[r],{type:"image",sendTargetingKeys:!1}))})),s=!0)})),i.mediaTypes=t,!i.bids)return;for(let e=i.bids.length-1;e>=0;e--){if(i.bids[e].dynamicId&&(i.bids[e].params.id=++freestar.dynamicIdNum),i.bids[e].bidder){const t={minViewPort:[0,0],relevantMediaTypes:["banner","native"]},n={minViewPort:[0,0],relevantMediaTypes:["banner","native","video"]};switch(i.bids[e].bidder){case"zid":i.bids[e].params.adUnitID=Number(i.bids[e].params.adUnitID),i.bids[e].sizeConfig=[t];break;case"appnexus":i.bids[e].params.keywords={fs_ad_product:[r||""]},i.bids[e].sizeConfig=[n];break;case"amazon":i.bids.splice(e,1),i.bids[e].sizeConfig=[t];break;case"onemobile":i.bids[e].params.ext=Object.assign(i.bids[e].params.ext||{},{req:location.href}),i.bids[e].sizeConfig=[t];break;case"ttd":i.bids[e].params.publisherId=freestar.fsdata.companyId,i.bids[e].sizeConfig=[t];break;case"gourmetads":i.bids[e].params.use_pmt_rule&&"true"===i.bids[e].params.use_pmt_rule&&(i.bids[e].params.use_pmt_rule=!0),i.bids[e].params.usePaymentRule&&"true"===i.bids[e].params.usePaymentRule&&(i.bids[e].params.usePaymentRule=!0),i.bids[e].sizeConfig=[t];break;case"resetdigital":Vt()||i.bids.splice(e,1);break;case"pubmatic":case"rubicon":case"ix":case"unruly":case"yieldmo":case"openx":case"yahoo":case"mediagrid":i.bids[e].sizeConfig=[n];break;default:i.bids[e].sizeConfig=[t]}}i.bids[e].size?Ft(i.bids[e].size[0],i.mediaTypes.banner.sizes)||i.bids.splice(e,1):i.bids[e].params.size&&(Ft(i.bids[e].params.size,i.mediaTypes.banner.sizes)||i.bids.splice(e,1))}const a=new Ut;return a.hasValidStoredRequests()&&!e.ignoreSiteBidders&&i.bids.push(a.addToPlacementAsBidder()),i}function Ft(e,t){for(let n=0;n<t.length;n++)if(JSON.stringify(e)===JSON.stringify(t[n]))return!0;return!1}function Vt(){const e=window.freestar.locData&&window.freestar.locData.iso||null,t=window.freestar.locData&&window.freestar.locData.state||null;return"US"===e&&!["CA","CO","CT","VA","UT"].includes(t)}class Gt{constructor({placement:e=null,prebid:t=null,slot:n=null}){this.placement=e,this.prebid=t,this.slot=n,this.trackers={adIds:[]}}update({prebid:e=null,slot:t=null}){e&&(this.prebid=e),t&&(this.slot=t)}getKVPs(){let e=null;return this.slot&&(e=this.slot.getTargetingMap(),e=Object.keys(e).map((t=>`${t}=${e[t]}`))),e}getWinningBid(){return this.prebid,null}}const Wt=new class{constructor(){this.adUnits=[],this.init()}init(){this.bindEvents()}add({placement:e=null,prebid:t=null,slot:n=null}){let i=!1;this.adUnits.some((e=>n&&e.prebid&&e.prebid.code===n.getSlotElementId()?(e.update({slot:n}),i=!0,!0):t&&e.slot&&e.slot.getSlotElementId()===t.code?(e.update({prebid:t}),i=!0,!0):void 0)),i||(e||(t&&(e=Gn({name:Ne({slotId:t.code})})),n&&(e=Gn({name:je({path:n.getAdUnitPath()}).placementName}))),e&&this.adUnits.push(new Gt({placement:e,prebid:t,slot:n})))}bindEvents(){window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.fsprebid.onEvent("auctionInit",(e=>{this.handleEventAuctionInit({data:e})})),window.fsprebid.onEvent("auctionEnd",(e=>{this.handleEventAuctionEnd({data:e})})),window.googletag.pubads().addEventListener("slotRequested",(e=>{this.handleEventSlotRequestedEnded({data:e})})),window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{this.handleEventSlotRenderEnded({data:e})}))}))}getAdUnitByPlacementName({placementName:e}){let t=!1;return this.adUnits.some((n=>{const{placement:i}=n;if(i&&i.name===e)return t=n,!0})),t}getAdUnitByPrebidCode({code:e}){let t=!1;return this.adUnits.some((n=>{const{prebid:i}=n;if(i&&i.code===e)return t=n,!0})),t}getAdUnitBySlotElementId({elementId:e}){let t=!1;return this.adUnits.some((n=>{const{slot:i}=n;if(i&&i.getSlotElementId()===e)return t=n,!0})),t}getAdUnitBySlotAdUnitPath({adUnitPath:e}){let t=!1;return this.adUnits.some((n=>{const{slot:i}=n;if(i&&i.getAdUnitPath()===e)return t=n,!0})),t}createAuctionStartMessage({adUnit:e,data:t}){const{userSync:{userIds:n}}=fsprebid.getConfig(),{auctionId:i=null}=t,r=e.prebid&&e.slot?"PREBID-GAM":e.prebid&&!e.slot?"PREBID":!e.prebid&&e.slot?"GAM":null,s=e.getKVPs(),a={seen:!1,eventType:"auctionStart",args:{placementId:e.placement.name,DfpId:e.slot.getAdUnitPath(),auctionId:i,auctionType:r,location:freestar.locData,userIds:n.map((e=>e.name)),kvps:s}};window.freestar.msg.que.push(a)}handleEventAuctionInit({data:e}){const{adUnits:t}=e;t.forEach((t=>{const{code:n}=t;(t=this.getAdUnitByPrebidCode({code:n}))&&this.createAuctionStartMessage({adUnit:t,data:e})}))}handleEventSlotRequestedEnded({data:e}){const{slot:t}=e,n=this.getAdUnitBySlotAdUnitPath({adUnitPath:t.getAdUnitPath()});n&&!n.prebid&&this.createAuctionStartMessage({adUnit:n,data:e})}createAuctionEndMessage({adUnit:e,data:t}){const n=setTimeout((()=>{clearTimeout(n);const{userSync:{userIds:i}}=fsprebid.getConfig(),{auctionId:r=null,advertiserId:s=null,campaignId:a=null,isEmpty:o=null,lineItemId:d=null,serviceName:l=null,size:c=[],sourceAgnosticCreativeId:u=null,sourceAgnosticLineItemId:f=null}=t,p=e.prebid&&e.slot?"PREBID-GAM":e.prebid&&!e.slot?"PREBID":!e.prebid&&e.slot?"GAM":null,g=e.getKVPs(),m=e.getWinningBid(),h={seen:!1,eventType:"auctionEnd",args:{placementId:e.placement.name,DfpId:e.slot.getAdUnitPath(),auctionId:r,auctionType:p,location:freestar.locData,userIds:i.map((e=>e.name)),kvps:g,winningBid:m,advertiserId:s,campaignId:a,isEmpty:o,lineItemId:d,serviceName:l,size:JSON.stringify(c),sourceAgnosticCreativeId:u,sourceAgnosticLineItemId:f}};window.freestar.msg.que.push(h)}),500)}handleEventAuctionEnd({data:e}){const{adUnits:t}=e;t.forEach((t=>{const{code:n}=t;(t=this.getAdUnitByPrebidCode({code:n}))&&!t.slot&&this.createAuctionEndMessage({adUnit:t,data:e})}))}handleEventSlotRenderEnded({data:e}){const{slot:t}=e,n=this.getAdUnitBySlotElementId({elementId:t.getSlotElementId()});n&&this.createAuctionEndMessage({adUnit:n,data:e})}};function Ht({adUnits:e}){if($t().getBypassFirstAuction())return;Array.isArray(e)||(e=[e]);const t=e.filter((e=>e&&null!=e.bids&&e.bids.length>0)),n=e.filter((e=>!e||null==e.bids||0===e.bids.length));if(n.length>0){const e=n.map((e=>e&&e.code)).join(", ");freestar.log(20,`Not adding adUnits ${e} which have no bidders configured.`)}freestar.log(20,`Adding ${t.length} adUnits to fsprebid.`),fsprebid.que.push((function(){fsprebid.addAdUnits(t)})),t.forEach((e=>{Wt.add({prebid:e})}))}function Jt(e,t,n=null,i=null){try{const n=function(e,t){let n={};return window.freestar.config.targeting&&Array.isArray(window.freestar.config.targeting)&&(n=window.freestar.config.targeting.find((function(e){return Object.keys(e).includes(t)}))),n&&(e={...e,...n[t]}),e}(i,t);if(n)for(const t in n)e.setTargeting(t,n[t])}catch(e){freestar.log(49,"ERROR:","slotTargeting",...arguments),freestar.log(49,"ERROR:","slotTargeting",e)}}function Qt(e){let t={};if(!e)return"";const n=["revolvingRail","slidingUnit","topAdhesion","standAloneVideo"].filter((t=>{const n=e[t+"Options"];return n?.active})),i=function(e){const t=e.selectedSize?.elementTargetedConfig;return t?{...t,source:"viewport"}:Me({placement:e,type:"dynamicAdOptions"})}(e);return i&&i.active&&n.push("dynamicAd"),t=e.stickyFooterOptions,t&&t.active&&n.push(!0===t.video?"stickyFooterVideo":"stickyFooter"),t=e.interstitialOptions,t&&t.active&&n.push("ZERGNET"===t.type?"reengageInter":"interstitial"),!0===e.lazyAd&&n.push("lazyLoad"),t=e.sideWallOptions,!t||1!==t.type&&2!==t.type||n.push("sideWall"),t=e.pushdownOptions,t&&t.isPushdownUnit&&n.push("pushdown"),n.length<=0&&n.push("banner"),n.filter((e=>!qt({name:e}))).join(",")}window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.freestar.adUnitManager=Wt}));const Kt="_FOOTER_ONLY",Zt=16;function Yt(e){return e.freestarBrandingDisabled&&!0===e.freestarBrandingDisabled?null:e&&e.stickyFooterOptions&&e.stickyFooterOptions.active?function(){const{branding:e}=freestar.fsdata;if(e&&"NO_BRANDING"!==e)return e.endsWith(Kt)?e.slice(0,-Kt.length):e;return null}():Xt()}function Xt(){const{branding:e}=freestar.fsdata;return e&&"NO_BRANDING"!==e&&!e.endsWith(Kt)?e:null}const en=({placement:e,sizes:t})=>{if(!e)return!1;const{pushdownOptions:n,stickyFooterOptions:i,interstitialOptions:r}=e;return!(n.isPushdownUnit||i.active||r.active||Ln(t))},tn=({ancillary:e,placement:t})=>{const n=Qt(t),i=ee({type:"div",classList:["__fs-branding"]}),r=ee({type:"a",attributes:[{href:`https://ads.freestar.com/?utm_campaign=branding&utm_medium=${n}&utm_source=${window.freestar.fsdata.domain}&utm_content=${t.name}`},{target:"_blank"},{rel:"noreferrer"}]}),s=ee({type:"img",src:`https://a.pub.network/core/imgs/fslogo-${Yt(t).toLowerCase()}.svg`,attributes:[{alt:"freestar"},{width:"14"},{height:"14"}]});r.appendChild(s),i.appendChild(r),e.appendChild(i)};function nn(e,t,n){const i=function(e,t){if(freestar.currentStickyFooter&&freestar.currentStickyFooter.placement){if(freestar.currentStickyFooter.placement.name===t.id)return"sticky-reportThisAd";if(e.pushdownOptions.isPushdownUnit)return"pushdown-reportThisAd"}return null}(t,n),r=n.id,s=ee({id:`__fs-reportThisAd-${r}`}),a=`btn-${r}`,o=ee({classList:["report-ad-container",i]}),d=ee({type:"button",id:a,classList:["report-ad-button"],attributes:[{"aria-label":"Report this ad"}]});d.style.fontSize="12px",d.style.color="black",d.style.textDecoration="none",d.style.cursor="pointer",d.style.background="none",d.style.marginLeft="auto",d.style.marginRight="auto",d.style.display="block",d.style.border="none",d.innerHTML="Report this ad",d.addEventListener("click",(function(e){try{const t=e.target.id.slice(4);window.confiant.services().reportSingleAd(t)}catch(e){alert("Unable to report the ad: "+e.toString())}})),t.stickyFooterOptions&&t.stickyFooterOptions.active&&("mobile"===freestar.deviceInfo.device.type&&("sticky-reportThisAd"===i&&(o.style.top="46px",o.style.right="0px"),d.style.marginTop="5px"),"NO_BRANDING"!==freestar.fsdata.branding&&(d.style.display="none")),o.appendChild(d),s.appendChild(o),e.style.position="relative",e.appendChild(o)}const rn=({ancillary:e,placement:t,element:n})=>{if(null===n.querySelector(".report-ad-container")&&(!t||!t.adQualityOptions||!0!==t.adQualityOptions.disabled)&&(freestar.fsdata.reportThisAd||freestar.fsdata.adQualityOptions&&freestar.fsdata.adQualityOptions.confiantReportThisAdEnabled&&$t().allowConfiant()||"true"===v("fsreportad"))){"CONFIANT"==function(){if(freestar.fsdata.adQualityOptions.vendor)return"desktop"===freestar.deviceInfo.device.type&&freestar.fsdata.adQualityOptions.desktopEnabled||freestar.fsdata.adQualityOptions.mobileEnabled?freestar.fsdata.adQualityOptions.vendor:null;switch(freestar.deviceInfo.device.type){case"desktop":return freestar.fsdata.adQualityDesktopVendor;case"mobile":return freestar.fsdata.adQualityMobileVendor;default:return null}}()&&freestar.fsdata.adQualityOptions&&freestar.fsdata.adQualityOptions.confiantReportThisAdEnabled&&$t().allowConfiant()&&nn(e,t,n)}};function sn(e){let t=e.querySelector(".__fs-ancillary");return t||(t=ee({type:"div",classList:["__fs-ancillary"]}),e.appendChild(t)),t}function an({element:e,target:t,targetIFrame:n,placement:i}){!function({element:e,target:t,targetIFrame:n,placement:i}){if(!(e&&t&&n&&i))return void freestar.log(20,"not applying branding, missing attribute",{element:e,target:t,targetIFrame:n,placement:i});if(n.offsetWidth<=1||n.offsetHeight<=1)return void freestar.log(20,"not applying branding, targetIFrame is too small",n);if(!Yt(i))return void freestar.log(20,"not applying branding, feature not active for placement",e.id,i);const r=i.sizes.sort().reverse();if(!isNaN(r[0][0])&&!en({placement:i,sizes:r}))return void freestar.log(20,"not applying report-this-ad based on sizes or non-standard product type",e.id,r,i);const s=sn(t);s.querySelector(".__fs-branding")?freestar.log(20,"Not applying branding, already exists!",e.id):(freestar.log(20,"applying branding",e.id),tn({ancillary:s,placement:i}));ln(e,n,s,r)}({element:e,target:t,targetIFrame:n,placement:i}),function({element:e,target:t,targetIFrame:n,placement:i}){if(!(e&&t&&n&&i))return void freestar.log(20,"not applying report-this-ad, missing attribute",{element:e,target:t,targetIFrame:n,placement:i});if(n.offsetWidth<=1||n.offsetHeight<=1)return void freestar.log(20,"not applying report-this-ad, targetIFrame is too small",n);if(!(freestar.fsdata.adQualityOptions&&freestar.fsdata.adQualityOptions.confiantReportThisAdEnabled&&$t().allowConfiant()||"true"===v("fsreportad")))return void freestar.log(20,"not applying report-this-ad, feature not active");const{stickyFooterOptions:r}=i,s=i.sizes.sort().reverse();if(!isNaN(s[0][0])&&!en({placement:i,sizes:s})&&!r.active)return void freestar.log(20,"not applying report-this-ad based on sizes or non-standard product type",e.id,s,i);const a=r.active?t:sn(t);freestar.log(20,"applying report-this-ad",e.id),rn({ancillary:a,placement:i,element:e}),r.active||ln(e,n,a,s)}({element:e,target:t,targetIFrame:n,placement:i})}const on={},dn=10;function ln(e,t,n,i){freestar.log(20,"setting ancillary style timeout",e.id),clearTimeout(on[e.id]);const r=t.width<=1?1500:dn;on[e.id]=setTimeout((()=>{freestar.log(20,"ancillary style timeout fired",e.id),n.style.setProperty("--childWidth",function(e,t){if(t<2)return"fluid"===e[0]?"100%":e[0][0]+"px";const n=Number(t);return isNaN(n)&&t.includes("%")?t:`${n}px`}(i,t.width||"300")),n.style.setProperty("visibility","visible")}),r)}const cn="SUPERFLEX v2.0",un={level:99,title:cn,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},fn={level:99,title:cn,styles:"background: lightblue; color: black; border-radius: 3px; padding: 3px"},pn={level:99,title:cn,styles:"background: green; color: white; border-radius: 3px; padding: 3px"},gn={level:99,title:cn,styles:"background: gold; color: black; border-radius: 3px; padding: 3px"},mn=[[970,250],[970,90],[728,90],[336,280],[300,600],[300,250]],hn=[[468,60],[320,50],[320,100],[300,250],[300,50],[300,100]],bn=["onemobile"];const wn="SUPERFLEX V3.0.0",yn={title:wn,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},vn={level:99,title:wn,styles:"background: lightblue; color: black; border-radius: 3px; padding: 3px"},kn=[[468,60],[320,50],[320,100],[300,250],[300,50],[300,100]],_n=["onemobile"];class In{constructor(){this.logs=new _e}update({placements:e}){this.placements=e.filter((e=>{let t=!0;if(e.sizeMappings.forEach((e=>{e.size.forEach((e=>{Fn(e)&&(t=!1)}))})),t)return e})),this.active=0!==e.length||!qt({name:"superflex"})}getIframeSize(e){if(e.contentDocument&&e.contentDocument.body){const{clientWidth:t,clientHeight:n}=e.contentDocument.body;if(t>1&&n>1)return{width:t,height:n}}return e.getBoundingClientRect()}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter((e=>Array.isArray(e))),[t.sort(((e,t)=>t[0]-e[0]))[0][0],t.sort(((e,t)=>t[1]-e[1]))[0][1]]}getPlacementsNames(){return this.placements.map((e=>e.name))}getValidBids({bids:e}){return Array.isArray(e)&&0!==e.length?e.filter((e=>"superflex"!==e.bidderCode&&!_n.includes(e.bidderCode)&&(!e.status||"rendered"!==e.status&&"targetingSet"!==e.status)&&this.isValidBidSize({size:e.size}))).sort(((e,t)=>t.cpm-e.cpm||t.width-e.width||t.height-e.height)):[]}getLargestBidBySize({bids:e}){return 0===e.length?[]:e.sort(((e,t)=>t.width-e.width||t.height-e.height))[0]}isValidBidSize({size:e}){return kn.map((e=>e.join("x"))).includes(e)}isViewportSuperflex(e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];i.viewport.size[0]>t&&zn()>=i.viewport.size[0]&&(t=i.viewport.size[0])}return!!e.find((e=>e.viewport.size[0]===t)).superflex}isSuperflex({placement:e}){return!(!e||!this.getPlacementsNames().includes(e.name))&&!!(e&&e.sizeMappings&&this.isViewportSuperflex(e.sizeMappings))}removeCSS({placement:e}){const t=document.getElementById(`_fs-sf-${e.name}-stylesheet`);t&&t.remove()}refresh({placement:e}){this.removeCSS({placement:e});document.getElementById(e.name).innerHTML="";const t=Vn();freestar.newAdSlots([{slotId:e.name,placementName:e.name,targeting:{"fs-sf-uuid":t}}])}auctionEndCallback(e){const{adUnits:t}=e;t.forEach((e=>{const{code:t}=e;if(-1!==e.code.indexOf("_fs-sf-"))return;if(-1!==e.code.indexOf("browsi"))return;if(!(e=Wt.getAdUnitByPrebidCode({code:t})))return this.logs.add(`Prebid Auction End Event for ${t}`),this.logs.add("Adunit not found"),void this.logs.show(yn);const{placement:n,prebid:i,slot:r}=e;if(!this.isSuperflex({placement:n}))return;this.logs.add(`Prebid Auction End Event for ${t}`),this.logs.add("Placement is Superflex");let s=fsprebid.getBidResponsesForAdUnitCode(t);if(0===s.bids.length)return this.logs.add("Did not receive any bids"),void this.logs.show(yn);s=s.bids,this.logs.add(`Received ${s.length} bid(s)`);const a=this.getValidBids({bids:s});if(0===a.length)return this.logs.add("Did not receive any valid bids"),void this.logs.show(yn);this.logs.add(`Received ${a.length} bid(s)`);const o=a[0],d=this.getLargestBidBySize({bids:s});if(o.adId===d.adId)return this.logs.add("topBidByCPM is the same ad as topBidBySize"),void this.logs.show(yn);if(o.width===d.width&&o.height===d.height)return this.logs.add("topBidByCPM is the same dimensions as topBidBySize"),void this.logs.show(yn);this.logs.add(`topBidByCPM: ${o.adId} $${o.cpm} (${o.width}x${o.height})`),this.logs.add(`topBidBySize: ${d.adId} $${d.cpm} (${d.width}x${d.height})`);const l=this.getLargestPossibleDimensions({placement:n}),c=l[0]>l[1]?"width":"height",u=l["width"===c?0:1]-o[c];if(u<o[c])return this.logs.add(`There is not enough space (${u}px) left to render additional ads`),void this.logs.show(yn);this.logs.add(`There is remaining space left ${u}px`);let f=Math.floor(u/o[c]);if(f>3&&(f=3),f<1)return;if(this.logs.add(`There is space for ${f} more ad(s)`),d.cpm>=o.cpm*(f+1))return this.logs.add(`topBidBySize CPM is greater than the combined potential CPM of ${f+1} additional ${o.width}x${o.height} ad(s) ($${d.cpm} vs. $${o.cpm*(f+1)})`),void this.logs.show(yn);this.logs.add(`topBidBySize CPM is less than the combined potential CPM of ${f+1} additional ${o.width}x${o.height} ad(s) ($${d.cpm} vs. $${o.cpm*(f+1)})`);const p=r.getTargeting("fs-sf-uuid")[0]||Vn(),g=ee({type:"div",id:`_fs-sf-${p}-0`,classList:["_fs-sf-ad"],attributes:[{name:n.name}]}),m=document.getElementById(r.getSlotElementId()),h=ee({type:"style",id:`_fs-sf-${n.name}-stylesheet`});h.textContent+=`\n                    [id='${m.id}'] {\n                        display: flex;\n                        align-items: center;\n                        justify-content: space-evenly;\n                    }\n                `,"width"===c&&(h.textContent+=`\n                        [id='${m.id}'] {\n                            width: ${l[0]}px;\n                            flex-direction: row;\n                        }\n                    `),"height"===c&&(h.textContent+=`\n                        [id='${m.id}'] {\n                            height: ${l[1]}px;\n                            flex-direction: column;\n                        }\n                    `),m.innerHTML="",m.appendChild(g),googletag.destroySlots([r]),s.forEach((e=>{e.adId!==o.adId&&(e.adUnitCode=Vn())}));const b=Nn({placement:n,sizes:[o.width,o.height],id:g.id,slotConfig:{targeting:Object.assign(fsprebid.getAdserverTargetingForAdUnitCode(i.code),{"fs-sf-uuid":p,"fs-sf-index":"0"})}});this.logs.add(`Created an ad for topBidByCPM ${g.id}`);const w=[],y=[];for(let e=1;e<=f;e++){const t=ee({type:"div",id:`_fs-sf-${p}-${e}`,classList:["_fs-sf-ad"],attributes:[{name:n.name}]});m.appendChild(t),w.push(Nn({placement:n,sizes:[o.width,o.height],id:t.id,slotConfig:{targeting:{"fs-sf-uuid":p,"fs-sf-index":`${e}`}}}));const i=JSON.parse(JSON.stringify(n));i.name=`_fs-sf-${p}-${e}`,i.sizes=[[o.width,o.height]],i.sizeMappings=i.sizeMappings.map((e=>(e.size=[[o.width,o.height]],e)));const r=Lt(i);r.mediaTypes.banner.sizes=[[o.width,o.height]],y.push(r),this.logs.add(`Created an additional ad ${t.id}`)}document.head.appendChild(h),googletag.pubads().refresh([b]),Ht({adUnits:y}),zt(y.map((e=>e.code)),w),this.logs.show(vn)}))}slotRequestedCallback(e){const{slot:t}=e;if(-1!==t.getSlotElementId().indexOf("_fs-sf-"))return;const n=Wt.getAdUnitBySlotElementId({elementId:t.getSlotElementId()});if(!n)return;const{placement:i}=n;if(this.isSuperflex({placement:i})&&0===t.getTargeting("fs-sf-uuid").length){const e=Vn();t.setTargeting("fs-sf-uuid",e)}}slotRenderEndedCallback(e){if(e.isEmpty)return;const{slot:t}=e;if(-1!==t.getSlotElementId().indexOf("_fs-sf-"))return;if(-1!==t.getSlotElementId().indexOf("browsi"))return;const n=Wt.getAdUnitBySlotElementId({elementId:t.getSlotElementId()});if(!n)return this.logs.add(`Slot Render Ended Event for ${t.getSlotElementId()}`),this.logs.add("Adunit not found"),void this.logs.show(yn);const{placement:i}=n;if(!this.isSuperflex({placement:i}))return;this.logs.add(`Slot Render Ended Event for ${t.getSlotElementId()}`),this.logs.add("Placement is Superflex");const r=document.getElementById(t.getSlotElementId());if(!r)return;const s=r.querySelector('div[id*="google_ads_iframe_"]');if(!s||s.classList.contains("_fs-sf-ad"))return;const a=r.querySelector('iframe[id*="google_ads_iframe_"]'),o=this.getIframeSize(a);if(o.width<=1||o.height<=1)return;this.logs.add(`Size of ad rendered is ${o.width}x${o.height}`);const d=this.getLargestPossibleDimensions({placement:i});this.logs.add(`Largest possible size is ${d[0]}x${d[1]}`);const l=d[0]-d[1]>100?"width":"height",c=d["width"===l?0:1]-o[l];if(c<a[l])return this.logs.add(`There is not enough space (${c}px) left to render additional ads`),void this.logs.show(yn);this.logs.add(`There is remaining space left ${c}px`);let u=Math.floor(c/o[l]);if(u>3&&(u=3),u<1)return;this.logs.add(`There is space for ${u} more ad(s)`),this.removeCSS({placement:i});const f=ee({type:"style",id:`_fs-sf-${i.name}-stylesheet`});"width"===l&&(f.textContent+=`\n                [id='${r.id}'] {\n                    width: ${d[0]}px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    flex-direction: row;\n                    flex-wrap: nowrap;\n                    margin: 0 auto;\n                }\n                [id='${r.id}']>div[id*="google_ads_iframe_"] {\n                    width: ${o.width+(o.width+10)*u}px !important;\n                    display: grid !important;\n                    grid-template-rows: 1fr;\n                    grid-template-columns: ${o.width}px repeat(${u}, 1fr);\n                    grid-column-gap: 0px;\n                    grid-row-gap: 0px;\n                    grid-template-areas: \n                        "ad-1 ${[...Array(u)].map(((e,t)=>"ad-"+(t+2))).join(" ")}"\n                        ${Xt()?'"branding-1 '+[...Array(u)].map(((e,t)=>"ad-"+(t+2))).join(" ")+'"':""}\n                }\n                [id='${r.id}']>div[id*="google_ads_iframe_"]>iframe {\n                    margin: auto;\n                    grid-area: ad-1;\n                }\n            `),"height"===l&&(f.textContent+=`\n                [id='${r.id}'] {\n                    height: ${d[1]}px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-evenly;\n                    flex-direction: column;\n                }\n                [id='${r.id}']>div[id*="google_ads_iframe_"] {\n                    height: auto !important;\n                }\n            `);const p=[],g=[],m=t.getTargeting("fs-sf-uuid")[0];for(let e=1;e<=u;e++){const t=ee({type:"div",id:`_fs-sf-${m}-${e}`,classList:["_fs-sf-ad"],attributes:[{name:i.name}]});s.appendChild(t),g.push(Nn({placement:i,sizes:[[o.width,o.height]],id:t.id,slotConfig:{targeting:{"fs-sf-uuid":m,"fs-sf-index":`${e}`}}}));const n=JSON.parse(JSON.stringify(i));n.name=`_fs-sf-${m}-${e}`,n.sizes=[[o.width,o.height]],n.sizeMappings=n.sizeMappings.map((e=>(e.size=[[o.width,o.height]],e)));const a=Lt(n);if(a.mediaTypes.banner.sizes=[[o.width,o.height]],p.push(a),this.logs.add(`Created an additional ad ${t.id}`),"width"===l){let n=o.height;Xt()&&(n+=Zt),f.textContent+=`\n                    [id='${r.id}']>div[id*="google_ads_iframe_"] #${t.id} {\n                        width: ${o.width}px !important;\n                        height: ${n}px !important;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        flex-direction: column;\n                        margin-left: 10px;\n                        grid-area: ad-${e+1};\n                    }\n                    [id='${r.id}']>div[id*="google_ads_iframe_"] #${t.id}>div[id*="google_ads_iframe_"] {\n                        height: auto !important;\n                    }\n                `}if("height"===l){let n=o.height;Xt()&&(n+=Zt),f.textContent+=`\n                    [id='${r.id}']>div[id*="google_ads_iframe_"] #${t.id} {\n                        width: 100% !important;\n                        height: auto !important;\n                        margin-top: ${(d[1]-n*(u+1))/(u+1)}px;\n                        --grid-area: ad-${e+1};\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                    }\n                    [id='${r.id}']>div[id*="google_ads_iframe_"] #${t.id}>div[id*="google_ads_iframe_"] {\n                        height: auto !important;\n                    }\n                `}}document.head.appendChild(f),Ht({adUnits:p}),zt(p.map((e=>e.code)),g),this.logs.show(vn)}registerSuperflexCallbacks(){fsprebid.onEvent("auctionEnd",this.auctionEndCallback.bind(this)),googletag.pubads().addEventListener("slotRequested",this.slotRequestedCallback.bind(this)),googletag.pubads().addEventListener("slotRenderEnded",this.slotRenderEndedCallback.bind(this))}}const Sn=JSON.parse(z({key:"fs.superflex"}))||{};let xn=class{constructor(){this.logs=new _e,this.auctionEndLogStatus=un}update({placements:e=[]}){this.placements=e.filter((e=>{let t=!0;if(e.sizeMappings.forEach((e=>{e.size.forEach((e=>{Fn(e)&&(t=!1)}))})),t)return e})),this.active=0!==e.length||!qt({name:"superflex"})}getPlacementsNames(){return this.placements.map((e=>e.name))}getPlacementByName({name:e}){return this.placements.filter((t=>t.name===e))[0]}getDirection({size:e}){return e[0]-e[1]>100?"row":"column"}getRemainingSpace({direction:e,size:t}){return"row"===e?t[0]:t[1]}getValidBids({bids:e}){return Array.isArray(e)&&0!==e.length?e.filter((e=>"superflex"!==e.bidderCode&&!bn.includes(e.bidderCode)&&(!e.status||"rendered"!==e.status&&"targetingSet"!==e.status)&&this.isValidBidSize({size:e.size}))).sort(((e,t)=>t.cpm-e.cpm||t.width-e.width||t.height-e.height)):[]}getLargestValidTargetSize({placement:e}){let t,{sizes:n}=e;return n=n.filter((e=>Array.isArray(e)&&!Fn(e))).sort(((e,t)=>t[0]-e[0]||t[1]-e[1])),n.some((e=>{if(mn.map((e=>e.join("x"))).includes(e.join("x")))return t=e,!0})),t}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter((e=>Array.isArray(e))),[t.sort(((e,t)=>t[0]-e[0]))[0][0],t.sort(((e,t)=>t[1]-e[1]))[0][1]]}_renderSynthethicBid({placement:e,bids:t,size:n},i){const r=document.getElementById(i.adUnitCode).querySelector('div[id*="google_ads_iframe_"]');r.classList.add("_fs-sf"),n=this.getLargestPossibleDimensions({placement:e}),fsprebid.markWinningBidAsUsed({adUnitCode:i.adUnitCode,adId:i.adId}),this.renderOptionalAds({placement:e,bids:t,size:n,path:"prebid",targetElement:r}),this.logs.add(`Superflex won the bid for ${e.name}`),this.logs.add(`Bids: ${t.length}`),this.logs.add(`CPMs: ${t.map((e=>e.cpm)).join(", ")}`),this.logs.add(`adIds: ${t.map((e=>e.adId)).join(", ")}`),this.logs.show(gn)}getSyntheticBid({placement:e,size:t,bids:n}){let i=function(e=100){let t=window.fsprebid.getConfig().customPriceBucket.buckets.find((t=>{if(e<=1*t.max&&e>=1*t.min)return t}));return function(e,t,n=1){const i=Number.isInteger(t.precision)?t.precision:2,r=t.increment*n,s=t.min*n,a=Math.pow(10,i+2),o=(e*a-s*a)/(r*a),d=Math.floor(o)*r+s;return Number(d.toFixed(10)).toFixed(i)}(e,t)}(n.map((e=>e.cpm)).reduce(((e,t)=>e+t),0)),r=Vn(),s=Object.assign({},n[0],{adId:r,bidder:"superflex",bidderCode:"superflex",cpm:i,pbAg:i,pbCg:i,pbDg:i,pbHg:i,pbLg:i,pbMg:i,ttl:15,adserverTargeting:{custom_bidder_size:`superflex_${t[0]}x${t[1]}`,hb_adid:r,hb_bidder:"superflex",hb_format:"banner",hb_pb:i,hb_size:`${t[0]}x${t[1]}`},width:t[0],height:t[1],size:`${t[0]}x${t[1]}`,renderer:{url:"https://a.pub.network/superflex/loader.js",render:this._renderSynthethicBid.bind(this,{placement:e,bids:n,size:t})}});return delete s.ad,freestar.fsDfpId&&(s.adserverTargeting.fspbg="freestar"),s}getBidsBasedOnRemainingSpace({bids:e,targetingParam:t,remainingSpace:n}){let i=n;return e.filter((e=>{if(e[t]<=i){let n=e[t];return"height"===t&&Xt()&&(n+=Zt),i-=n,!0}return!1})).sort(((e,t)=>t.cpm-e.cpm))}isValidBidSize({size:e}){return hn.map((e=>e.join("x"))).includes(e)}renderPrebidDivAndIFrame({targetElement:e,placement:t,bid:n,iteration:i=1}){const r=ee({type:"iframe",id:`_fs-sf-${n.adId}-${i}`,attributes:[{width:n.width},{height:n.height},{frameBorder:0},{marginHeight:0},{marginWidth:0},{scrolling:"no"},{style:`width:${n.width}px;`}]}),s=ee({type:"div",id:`_fs-sf-wrapper-${n.adId}-${i}`,classList:["_fs-sf"]});s.appendChild(r),e.appendChild(s),fsprebid.renderAd(document.querySelector("#_fs-sf-"+n.adId+"-"+i).contentWindow.document,n.adId),an({element:r,target:s,targetIFrame:r,placement:t})}renderGAMDiv({targetElement:e,placement:t,bid:n,iteration:i=1}){const r=ee({type:"div",id:`_fs-sf-${n.adId}-${i}`,classList:["_fs-sf"],attributes:[{style:`width:${n.width}px; height:${n.height}px;`}]});e.appendChild(r);const s={targeting:n.adserverTargeting};s.targeting.fs_ad_product="superflex-child-"+i;const a=Nn({placement:t,sizes:[[n.width,n.height]],id:`_fs-sf-${n.adId}-${i}`,slotConfig:s});googletag.pubads().refresh([a]),setTimeout((()=>{an({element:r,target:r,targetIFrame:r.querySelector("iframe"),placement:t})}),1500)}auctionInitCallback(e){e.adUnitCodes.forEach((e=>{const t=Gn({name:qe({slotId:e})});if(!t||!this.getPlacementsNames().includes(t.name))return;if(t&&t.sizeMappings&&!this.isViewportSuperflex(t.sizeMappings))return;const n=document.getElementById(t.name);n&&(n.innerHTML="");const i=document.getElementById(`_fs-sf-${t.name}-stylesheet`);i&&i.remove()}))}renderOptionalAds({placement:e,bids:t,path:n="gam",targetElement:i}){let r=1,s=i.querySelector("iframe")||null;const a=this.getLargestPossibleDimensions({placement:e}),o=this.getDirection({size:a}),d=document.getElementById(`_fs-sf-${e.name}-stylesheet`);d&&d.remove();const l=ee({type:"style",id:`_fs-sf-${e.name}-stylesheet`});let c=a[0],u=a[1];Xt()&&(u+=Zt),"row"===o&&(l.textContent+=`\n                #${e.name} {\n                    width: ${c}px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    flex-direction: row;\n                    flex-wrap: nowrap;\n                    margin: 0 auto;\n                }\n                #${e.name}>div[id*="google_ads_iframe_"] {\n                    width: ${s.offsetWidth+t.map((e=>e.width+10)).reduce(((e,t)=>e+t))}px !important;\n                    height: ${u}px;\n                    display: grid !important;\n                    grid-template-rows: 1fr;\n                    grid-template-columns: ${s.offsetWidth}px repeat(${t.length}, 1fr);\n                    grid-column-gap: 0px;\n                    grid-row-gap: 0px;\n                }\n            `),"column"===o&&(l.textContent+=`\n                #${e.name} {\n                    height: ${u}px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    flex-direction: column;\n                }\n                #${e.name}>div[id*="google_ads_iframe_"] {\n                    height: ${s.offsetHeight+(Xt()?Zt:0)+t.map((e=>Xt()?e.height+Zt+10:e.height+10)).reduce(((e,t)=>e+t))}px !important;\n                    display: grid !important;\n                    grid-template-columns: 1fr;\n                    grid-template-rows: ${s.offsetHeight}px ${"column"===o&&Xt()?"16px ":""} repeat(${t.length}, 1fr);\n                    grid-column-gap: 0px;\n                    grid-row-gap: 0px;\n                    margin: 0 auto;\n                }\n            `),"row"===o&&(l.textContent+=`\n                #${e.name}>div[id*="google_ads_iframe_"] {\n                    grid-template-areas: \n                        "ad-1 ${t.map(((e,t)=>"ad-"+(t+2))).join(" ")}"\n                        ${Xt()?'"branding-1 '+t.map(((e,t)=>"ad-"+(t+2))).join(" ")+'"':""}\n                }\n                #${e.name}>div[id*="google_ads_iframe_"]>iframe {\n                    margin: auto;\n                    grid-area: ad-1;\n                }\n            `,Xt()&&(l.textContent+=`\n                    #${e.name}>div[id*="google_ads_iframe_"]>.__fs-ancillary {\n                        grid-area: branding-1;\n                    }\n                `)),"column"===o&&(l.textContent+=`\n                #${e.name}>div[id*="google_ads_iframe_"] {\n                    grid-template-areas: \n                        "ad-1"\n                        ${Xt()?'"branding-1"':""}\n                        "ad-2"\n                        "ad-3"\n                        "ad-4"\n                        "ad-5";\n                }\n                #${e.name}>div[id*="google_ads_iframe_"]>iframe {\n                    margin: 0 auto;\n                    grid-area: ad-1;\n                }\n            `,Xt()&&(l.textContent+=`\n                    #${e.name}>div[id*="google_ads_iframe_"]>.__fs-ancillary {\n                        grid-area: branding-1;\n                    }\n                `));for(const a of t){switch("row"===o&&(l.textContent+=`\n                    #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-${a.adId}-${r},\n                    #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-wrapper-${a.adId}-${r} {\n                        width: 100% !important;\n                        height: ${u}px !important;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        flex-direction: column;\n                        margin-left: 10px;\n                    }\n                `),"column"===o&&(l.textContent+=`\n                    #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-${a.adId}-${r},\n                    #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-wrapper-${a.adId}-${r} {\n                        width: 100% !important;\n                        height: auto !important;\n                        margin-top: 10px;\n                    }\n                `),n){case"gam":this.renderGAMDiv({targetElement:i,placement:e,bid:a,iteration:r}),l.textContent+=`\n                        #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-${a.adId}-${r},\n                        #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-wrapper-${a.adId}-${r} {\n                            grid-area: ad-${r+1};\n                        }\n                    `;break;case"prebid":s.style.position="absolute",s.style.zIndex=-1,this.renderPrebidDivAndIFrame({targetElement:i,placement:e,bid:a,iteration:r}),"column"===o&&(l.textContent+=`\n                            #${e.name}>div[id*="google_ads_iframe_"] {\n                                grid-template-rows: repeat(${t.length}, 1fr);\n                            }\n                        `),"row"===o&&(l.textContent+=`\n                            #${e.name}>div[id*="google_ads_iframe_"] {\n                                grid-template-columns: repeat(${t.length}, 1fr);\n                            }\n                        `),l.textContent+=`\n                        #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-${a.adId}-${r},\n                        #${e.name}>div[id*="google_ads_iframe_"] #_fs-sf-wrapper-${a.adId}-${r} {\n                            grid-area: ad-${r};\n                        }\n                    `}r+=1}document.head.appendChild(l)}handleAuctionEndValidBids(e,t,n,i){const r=this.getLargestValidTargetSize({placement:e});if(!r)return;const s=this.getDirection({size:r}),a="row"===s?"width":"height",o=this.getRemainingSpace({direction:s,size:r});(n=this.getBidsBasedOnRemainingSpace({bids:n,targetingParam:a,remainingSpace:o})).length<2||this.createAndLogSyntheticBid(n,e,r,t,i)}createAndLogSyntheticBid(e,t,n,i,r){const s=this.getSyntheticBid({placement:t,size:n,bids:e});r.bidsReceived.push(s);const a=Dn({elementId:i.code}),o=a.getTargetingMap();o.fs_ad_product&&"banner"!==o.fs_ad_product[0]||Jt(a,t.name,null,{fs_ad_product:"superflex"}),this.logs.add(`Synthetic bid created for ${t.name}`),this.logs.add(`Bids: ${e.length}`),this.logs.add(`Combined CPMs: ${s.cpm}`),this.logs.add(`CPMs: ${e.map((e=>e.cpm)).join(", ")}`),this.logs.add(`adIds: ${e.map((e=>e.adId)).join(", ")}`),this.auctionEndLogStatus=fn}auctionEndCallback(e){this.logs.add("Calling registerSuperflexCallbacks");const{adUnits:t}=e;t.forEach((t=>{this.auctionEndLogStatus=un;try{const n=Gn({name:qe({slotId:t.code})});if(!n||!this.getPlacementsNames().includes(n.name))return;if(n&&n.sizeMappings&&!this.isViewportSuperflex(n.sizeMappings))return;let i=e.bidsReceived.filter((e=>e.adUnitCode===t.code));const r=this.getValidBids({bids:i});if(!r.length)return;this.handleAuctionEndValidBids(n,t,r,e)}finally{this.logs.show(this.auctionEndLogStatus)}}))}isViewportSuperflex(e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];i.viewport.size[0]>t&&zn()>=i.viewport.size[0]&&(t=i.viewport.size[0])}return!!e.find((e=>e.viewport.size[0]===t)).superflex}slotRenderEndedCallback(e){try{if(e.isEmpty)return;const t=e.slot.getSlotElementId(),n=Gn({name:qe({slotId:t})});if(!n||!this.getPlacementsNames().includes(n.name))return;if(n&&n.sizeMappings&&!this.isViewportSuperflex(n.sizeMappings))return;let{bids:i}=fsprebid.getBidResponsesForAdUnitCode(t);if(i.some((e=>e.adUnitCode===t&&"superflex"===e.bidderCode&&"rendered"===e.status)))return;i=this.getValidBids({bids:i}),0!==i.length&&setTimeout((()=>this.handleSlotRenderEndedValidBids(t,n,i)),250)}finally{this.logs.show()}}handleSlotRenderEndedValidBids(e,t,n){const i=document.getElementById(e);if(!i)return;const r=i.querySelector('div[id*="google_ads_iframe_"]');if(!r||r.classList.contains("_fs-sf"))return;const s=i.querySelector('iframe[id*="google_ads_iframe_"]'),a=this.getIframeSize(s);if(a.width<=1||a.height<=1)return;const o=this.getLargestPossibleDimensions({placement:t}),d=this.getDirection({size:o}),l="row"===d?"width":"height";let c=this.getRemainingSpace({direction:d,size:o}),u=a[l];"height"===l&&Xt()&&(u+=Zt),c-=u,c<=0||0!==(n=this.getBidsBasedOnRemainingSpace({bids:n,targetingParam:l,remainingSpace:c})).length&&(this.renderOptionalAds({placement:t,bids:n,path:"gam",targetElement:r}),this.logs.add(`GAM won, sending additional ${n.length} ad(s) to GAM for ${t.name}`),this.logs.add(`Bids: ${n.length}`),this.logs.add(`CPMs: ${n.map((e=>e.cpm)).join(", ")}`),this.logs.add(`adIds: ${n.map((e=>e.adId)).join(", ")}`),this.logs.show(pn))}getIframeSize(e){if(e.contentDocument&&e.contentDocument.body){const{clientWidth:t,clientHeight:n}=e.contentDocument.body;if(t>1&&n>1)return{width:t,height:n}}return e.getBoundingClientRect()}registerSuperflexCallbacks(){fsprebid.onEvent("auctionInit",this.auctionInitCallback.bind(this)),fsprebid.onEvent("auctionEnd",this.auctionEndCallback.bind(this)),googletag.pubads().addEventListener("slotRenderEnded",this.slotRenderEndedCallback.bind(this)),this.logs.show()}};if(v("fs-use-sfv3")&&(Sn.superflexTest={whichVersion:"v3"}),Sn.superflexTest)"v3"===Sn.superflexTest.whichVersion&&(xn=In);else{const e=.02;if(Math.random()<=e){const e=Math.random()<=.5?"v2":"v3";"v3"===e&&(xn=In),Sn.superflexTest={whichVersion:e}}else Sn.superflexTest={active:!1};q({key:"fs.superflex",value:Sn,type:j.object})}window.freestar=window.freestar||{},window.freestar.queue=window.freestar.queue||[],Sn.superflexTest&&Sn.superflexTest.whichVersion&&window.freestar.queue.push((()=>{googletag.pubads().setTargeting("fs-superflex-test",!!Sn.superflexTest.whichVersion&&Sn.superflexTest.whichVersion)}));const En=new xn;window.freestar.superflexManager=En;"IntersectionObserver"in window&&new IntersectionObserver((function(e){e.forEach((e=>{freestar.refreshLibrary[e.target.id]&&(freestar.refreshLibrary[e.target.id].intersectionRatio=e.intersectionRatio)}))}),{root:null,threshold:.5});class Tn{constructor(){this.slotMaxBids={},this.slotToPlacement={},this.placementToSlots={}}initiateWatcher(e){e.que.push((()=>{e.onEvent("bidResponse",this.handleBidResponse.bind(this))}))}handleBidResponse(e){this.addSlotPlacementAssociation(e.adUnitCode),this.addBidResponse(e)}addSlotPlacementAssociation(e){if(e&&!this.slotToPlacement[e]){const t=qe({slotId:e});t&&(this.slotToPlacement[e]=t,this.placementToSlots[t]||(this.placementToSlots[t]=[]),this.placementToSlots[t].push(e))}}addBidResponse(e){const{adUnitCode:t,cpm:n}=e;t&&n&&(!this.slotMaxBids[t]||this.slotMaxBids[t]<n)&&(this.slotMaxBids[t]=n)}getSlotMaxBid(e){return Tn.validateMaxBid(this.slotMaxBids[e])}getPlacementMaxBidBySlot(e){const t=this.slotToPlacement[e];return this.getPlacementMaxBid(t)}getPlacementMaxBid(e){const t=this.placementToSlots[e]||[];return Tn.validateMaxBid(Math.max(...t.map((e=>this.getSlotMaxBid(e)))))}static validateMaxBid(e){return!Number.isNaN(e)&&null!=e&&e>0?e:null}}let An=null;function Cn(){return window.freestar.fsdata.domain||location.host}async function Pn(e,t,n,i,r){const s=Cn(),a="Apple"===e?"smartphone-ios":t,o=Hn.isKnown(),d=i&&null!=r?`&mb=${r}&au=${encodeURIComponent(i)}`:"",l=fetch(`${Dt}?${`d=${s}&t=${a}&k=${o}&r=${n}${d}`}`,{headers:{"x-api-key":Ot}}),c=await l;return await c.json()}class Rn{constructor(e,t){this.idealAdStackManager=e,this.maxBidTracker=t,this.initialData=null,this.requests=[],this.maxBidRequests={}}async getInitialFloorsData(){const{timestamp:e,floors:t}=this.getRequest(0);return this.initialData?await t:this.initialData={timestamp:e,floors:await t},this.initialData}getRequest(e,t,n){return t&&null!=n?(this.maxBidRequests[t.name]||(this.maxBidRequests[t.name]=[null]),this.maxBidRequests[t.name][e]||(this.maxBidRequests[t.name][e]={}),this.maxBidRequests[t.name][e][n]||(this.maxBidRequests[t.name][e][n]={timestamp:new Date,floors:this.fetchData(e,t.dfpId,n)}),this.maxBidRequests[t.name][e][n]):(this.requests[e]||(this.requests[e]={timestamp:new Date,floors:this.fetchData(e)}),this.requests[e])}getRequestUrl(e,t,n,i,r){const s=Cn(),a="Apple"===e?"smartphone-ios":t,o=Hn.isKnown(),d=i&&null!=r?`&mb=${r}&au=${encodeURIComponent(i)}`:"";return`${Dt}?${`d=${s}&t=${a}&k=${o}&r=${n}${d}`}`}async fetchData(e,t,n){let i;if(0===e){const e=await this.idealAdStackManager().getFloorsData();e&&!e.error&&e.length>0&&(i=e)}if(!i){let r;if(0===e)({data:i,error:r}=await $e().fetch({requestId:"getFloorsData",fetchFn:()=>Pn(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,e,t,n)})),$e().clearClassCachedData({requestId:"getFloorsData"});else try{i=await Pn(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,e,t,n)}catch(e){r=e}if(r){const s=t&&null!=n?`, placement ${t}, maxBid ${n}`:"";freestar.log(40,`Floors request for refresh ${e}${s} error`,r.toString()),i=[]}}const{error:r,message:s}=i;return r&&(freestar.msg.que.push({eventType:"customEvent",args:{eventName:"FLOORS_ERROR",eventType:"FETCH_RESPONSE",jsonValue:JSON.stringify({message:s})}}),i=[]),i}getFloor(e,t,n){const i=t.find((e=>n.dfpId===e.adUnit)),r=i?i.upr:"timeout",s=i?new Date(i.lastUpdated):e;return{floors_id:r,floors_hour:String(s.getUTCHours())}}getInitialFloorKVP({placement:e,keyMap:t}){return t||(t={}),Object.assign(t,this.getFloor(this.initialData.timestamp,this.initialData.floors,e))}async getFloorsData({placement:e,slotId:t,callback:n,isRebid:i=!1}){let r,s;if(!window.freestar.fsdata.isTriple13Enabled)return r=null,s="inactive",void n({result:r,reason:s});const a=(function(e){const t=freestar.refreshLibrary[e];if(t)return t.timesRefreshed}(t)||0)+(i?1:0);let o,d;if(0===a||i)({timestamp:o,floors:d}=this.getRequest(a));else{const n=this.maxBidTracker.getSlotMaxBid(t),i=Rn.formatMaxBid(n);({timestamp:o,floors:d}=this.getRequest(a,e,i))}r=this.getFloor(o,await d,e),s=null,n&&n({result:r,reason:s})}static formatMaxBid(e){if(null!=e){const t=e.toString();if(t){if(t.includes("e-"))return"0";if(t.includes("e"))return e.toPrecision(3);const n=e.toString().match(/^-?\d*(?:\.\d{0,2})?/);if(n){let e=n[0];for(;e.includes(".")&&(e.endsWith("0")||e.endsWith("."));)e=e.slice(0,-1);return e}}}return null}}const Bn=U.getInstanceFn({ClassConstructor:Rn,instanceName:"floorsManager",params:[$t,(null==An&&(An=new Tn),An)]});function $n({slot:e,key:t,value:n}){e&&e.setTargeting&&t&&n&&e.setTargeting(t,n)}function On(){return window.googletag.pubads&&window.googletag.pubads().getSlots()}function Dn({elementId:e}){if(e)return On().filter((t=>t.getSlotElementId()===e))[0]}function Mn({specialDfpId:e,dfpId:t}){return e||!t.includes("{{channel}}")}function Nn({placement:e,sizes:t,id:n=null,specialDfpId:i=null,slotConfig:r}){if(!e)return void freestar.log("No placement provided, exiting...");if(!t&&(t=function(e){let t=!1;return e.sizeMappings.some((e=>{if(zn()>=e.viewport.size[0])return t=e.size.sort(((e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0)).filter((e=>35843!==e[0])),!0})),t}(e),!t))return void freestar.log("No sizes found at this resolution, exiting...");n||(n=e.name);let{outOfPage:s,dfpId:a,fluidAd:o}=e,d=Dn({elementId:n});if(d||(s?Mn({specialDfpId:i,dfpId:a})&&(d=function({dfpId:e,elementId:t}){return window.googletag.defineOutOfPageSlot(e,t).addService(googletag.pubads())}({dfpId:i||a,elementId:n})):(o&&!t.includes("fluid")&&t.push("fluid"),Mn({specialDfpId:i,dfpId:a})&&(d=googletag.defineSlot(i||a,t,n).addService(googletag.pubads())))),d){if(freestar.fsdata.disableSingleRequest||googletag.pubads().enableSingleRequest(),googletag.enableServices(),function({id:e,placement:t}){freestar.gamMap[e]||(freestar.gamMap[e]=t.dfpId.indexOf("/15184186/")>-1)}({id:n,placement:e}),d.setTargeting){let t={fsrefresh:"0",fsrebid:"0",fs_uuid:Vn()};window.freestar.fsdata.isTriple13Enabled&&(t=Bn().getInitialFloorKVP({placement:e,keyMap:t})),Object.keys(t).forEach((e=>{d.setTargeting(e,t[e])}))}if(freestar.gptppid&&freestar.gptppid.updateGoogleSlotTargeting(d),e&&$n({slot:d,key:"fs_placementName",value:e.name}),r&&r.targeting)for(const e in r.targeting)Object.prototype.hasOwnProperty.call(r.targeting,e)&&$n({slot:d,key:e,value:r.targeting[e]});return At({slot:d}),ze({placementName:e.name,slotId:n,path:i||a}),Wt.add({placement:e,slot:d}),d}}const jn={key:"fs.exclude.bidders",type:j.array.type};function zn(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function qn(){return freestar.fsdata.placements}const Un=({adUnitPath:e})=>window.freestar.fsdata.placements.find((t=>e===t.dfpId)),Ln=e=>1===e.length&&1===e[0][0]&&1===e[0][1],Fn=e=>Array.isArray(e)&&e.length>1&&35843===e[0],Vn=()=>Ae();const Gn=({name:e})=>window.freestar.fsdata.placements.filter((t=>t.name===e))[0];const Wn="fs.session";const Hn=new class{constructor(){this.known=0,this.cdep=!1,this.init()}async init(){const e=JSON.parse(z({key:Wn}));e&&e.known&&(this.known=1),this.timer=setInterval((async()=>{await this.checkCDEP()}),1e3)}async checkCDEP(){const e=await async function(){if("cookieDeprecationLabel"in navigator){let e=navigator.cookieDeprecationLabel;if("getValue"in e&&"function"==typeof e.getValue){let t=await e.getValue();if(t)return t}}}();e&&0!==e.length&&(this.cdep=!0,clearTimeout(this.timer))}update(){if(this.known)return;const e=this.computeIsKnownValue(),t=JSON.parse(z({key:Wn}));let n=null;null==t?n={known:e}:(null==t.known||!t.known&&e)&&(n=Object.assign({},t,{known:e})),n&&q({key:Wn,type:j.object,value:n}),this.known=e}isKnownByPrebidUser(){return Boolean(window.fsprebid&&window.fsprebid.getUserIds&&0!==Object.keys(window.fsprebid.getUserIds()).length)}isCDEPUser(){return this.cdep}computeIsKnownValue(){return Number(!this.isCDEPUser()&&this.isKnownByPrebidUser())}isKnown(){return this.known!=this.computeIsKnownValue()&&this.update(),this.known}};var Jn,Qn,Kn={exports:{}};Jn=Kn,Qn=Kn.exports,function(e,t){var n="function",i="undefined",r="object",s="string",a="major",o="model",d="name",l="type",c="vendor",u="version",f="architecture",p="console",g="mobile",m="tablet",h="smarttv",b="wearable",w="embedded",y="Amazon",v="Apple",k="ASUS",_="BlackBerry",I="Browser",S="Chrome",x="Firefox",E="Google",T="Huawei",A="LG",C="Microsoft",P="Motorola",R="Opera",B="Samsung",$="Sharp",O="Sony",D="Xiaomi",M="Zebra",N="Facebook",j="Chromium OS",z="Mac OS",q=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},U=function(e,t){return typeof e===s&&-1!==L(t).indexOf(L(e))},L=function(e){return e.toLowerCase()},F=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===i?e:e.substring(0,350)},V=function(e,i){for(var s,a,o,d,l,c,u=0;u<i.length&&!l;){var f=i[u],p=i[u+1];for(s=a=0;s<f.length&&!l&&f[s];)if(l=f[s++].exec(e))for(o=0;o<p.length;o++)c=l[++a],typeof(d=p[o])===r&&d.length>0?2===d.length?typeof d[1]==n?this[d[0]]=d[1].call(this,c):this[d[0]]=d[1]:3===d.length?typeof d[1]!==n||d[1].exec&&d[1].test?this[d[0]]=c?c.replace(d[1],d[2]):t:this[d[0]]=c?d[1].call(this,c,d[2]):t:4===d.length&&(this[d[0]]=c?d[3].call(this,c.replace(d[1],d[2])):t):this[d]=c||t;u+=2}},G=function(e,n){for(var i in n)if(typeof n[i]===r&&n[i].length>0){for(var s=0;s<n[i].length;s++)if(U(n[i][s],e))return"?"===i?t:i}else if(U(n[i],e))return"?"===i?t:i;return e},W={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},H={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,u],[/opios[\/ ]+([\w\.]+)/i],[u,[d,R+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[d,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[d,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[u,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[u,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+I],u],[/\bfocus\/([\w\.]+)/i],[u,[d,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[d,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[d,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[d,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[u,[d,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+I],u],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,N],u],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[u,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[d,S+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,S+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[d,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,u],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[u,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[u,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[u,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[d,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,u],[/(cobalt)\/([\w\.]+)/i],[d,[u,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,L]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",L]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[o,[c,B],[l,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[o,[c,B],[l,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[o,[c,v],[l,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[o,[c,v],[l,m]],[/(macintosh);/i],[o,[c,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[o,[c,$],[l,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[o,[c,T],[l,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[o,[c,T],[l,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[o,/_/g," "],[c,D],[l,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[o,/_/g," "],[c,D],[l,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[o,[c,"OPPO"],[l,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[o,[c,"Vivo"],[l,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[o,[c,"Realme"],[l,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[o,[c,P],[l,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[o,[c,P],[l,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[o,[c,A],[l,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[o,[c,A],[l,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[o,[c,"Lenovo"],[l,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[o,/_/g," "],[c,"Nokia"],[l,g]],[/(pixel c)\b/i],[o,[c,E],[l,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[o,[c,E],[l,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o,[c,O],[l,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[o,"Xperia Tablet"],[c,O],[l,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[o,[c,"OnePlus"],[l,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[o,[c,y],[l,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[o,/(.+)/g,"Fire Phone $1"],[c,y],[l,g]],[/(playbook);[-\w\),; ]+(rim)/i],[o,c,[l,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[o,[c,_],[l,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[o,[c,k],[l,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[o,[c,k],[l,g]],[/(nexus 9)/i],[o,[c,"HTC"],[l,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[o,/_/g," "],[l,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[o,[c,"Acer"],[l,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[o,[c,"Meizu"],[l,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,o,[l,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,o,[l,m]],[/(surface duo)/i],[o,[c,C],[l,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[o,[c,"Fairphone"],[l,g]],[/(u304aa)/i],[o,[c,"AT&T"],[l,g]],[/\bsie-(\w*)/i],[o,[c,"Siemens"],[l,g]],[/\b(rct\w+) b/i],[o,[c,"RCA"],[l,m]],[/\b(venue[\d ]{2,7}) b/i],[o,[c,"Dell"],[l,m]],[/\b(q(?:mv|ta)\w+) b/i],[o,[c,"Verizon"],[l,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[o,[c,"Barnes & Noble"],[l,m]],[/\b(tm\d{3}\w+) b/i],[o,[c,"NuVision"],[l,m]],[/\b(k88) b/i],[o,[c,"ZTE"],[l,m]],[/\b(nx\d{3}j) b/i],[o,[c,"ZTE"],[l,g]],[/\b(gen\d{3}) b.+49h/i],[o,[c,"Swiss"],[l,g]],[/\b(zur\d{3}) b/i],[o,[c,"Swiss"],[l,m]],[/\b((zeki)?tb.*\b) b/i],[o,[c,"Zeki"],[l,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],o,[l,m]],[/\b(ns-?\w{0,9}) b/i],[o,[c,"Insignia"],[l,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[o,[c,"NextBook"],[l,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],o,[l,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],o,[l,g]],[/\b(ph-1) /i],[o,[c,"Essential"],[l,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[o,[c,"Envizen"],[l,m]],[/\b(trio[-\w\. ]+) b/i],[o,[c,"MachSpeed"],[l,m]],[/\btu_(1491) b/i],[o,[c,"Rotor"],[l,m]],[/(shield[\w ]+) b/i],[o,[c,"Nvidia"],[l,m]],[/(sprint) (\w+)/i],[c,o,[l,g]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[c,C],[l,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[o,[c,M],[l,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[o,[c,M],[l,g]],[/smart-tv.+(samsung)/i],[c,[l,h]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[c,B],[l,h]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,A],[l,h]],[/(apple) ?tv/i],[c,[o,v+" TV"],[l,h]],[/crkey/i],[[o,S+"cast"],[c,E],[l,h]],[/droid.+aft(\w+)( bui|\))/i],[o,[c,y],[l,h]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[o,[c,$],[l,h]],[/(bravia[\w ]+)( bui|\))/i],[o,[c,O],[l,h]],[/(mitv-\w{5}) bui/i],[o,[c,D],[l,h]],[/Hbbtv.*(technisat) (.*);/i],[c,o,[l,h]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[c,F],[o,F],[l,h]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,h]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,o,[l,p]],[/droid.+; (shield) bui/i],[o,[c,"Nvidia"],[l,p]],[/(playstation [345portablevi]+)/i],[o,[c,O],[l,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[o,[c,C],[l,p]],[/((pebble))app/i],[c,o,[l,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[o,[c,v],[l,b]],[/droid.+; (glass) \d/i],[o,[c,E],[l,b]],[/droid.+; (wt63?0{2,3})\)/i],[o,[c,M],[l,b]],[/(quest( 2| pro)?)/i],[o,[c,N],[l,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[l,w]],[/(aeobc)\b/i],[o,[c,y],[l,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[o,[l,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[o,[l,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,g]],[/(android[-\w\. ]{0,9});.+buil/i],[o,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[u,G,W]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[u,G,W]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,z],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[u,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,u],[/\(bb(10);/i],[u,[d,_]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[d,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[u,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[u,[d,S+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,j],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,u],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,u]]},J=function(p,h){if(typeof p===r&&(h=p,p=t),!(this instanceof J))return new J(p,h).getResult();var b=typeof e!==i&&e.navigator?e.navigator:t,w=p||(b&&b.userAgent?b.userAgent:""),y=b&&b.userAgentData?b.userAgentData:t,v=h?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(H,h):H,k=b&&b.userAgent==w;return this.getBrowser=function(){var e={};return e[d]=t,e[u]=t,V.call(e,w,v.browser),e[a]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:t}(e[u]),k&&b&&b.brave&&typeof b.brave.isBrave==n&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[f]=t,V.call(e,w,v.cpu),e},this.getDevice=function(){var e={};return e[c]=t,e[o]=t,e[l]=t,V.call(e,w,v.device),k&&!e[l]&&y&&y.mobile&&(e[l]=g),k&&"Macintosh"==e[o]&&b&&typeof b.standalone!==i&&b.maxTouchPoints&&b.maxTouchPoints>2&&(e[o]="iPad",e[l]=m),e},this.getEngine=function(){var e={};return e[d]=t,e[u]=t,V.call(e,w,v.engine),e},this.getOS=function(){var e={};return e[d]=t,e[u]=t,V.call(e,w,v.os),k&&!e[d]&&y&&"Unknown"!=y.platform&&(e[d]=y.platform.replace(/chrome os/i,j).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(e){return w=typeof e===s&&e.length>350?F(e,350):e,this},this.setUA(w),this};J.VERSION="1.0.36",J.BROWSER=q([d,u,a]),J.CPU=q([f]),J.DEVICE=q([o,c,l,p,g,h,m,b,w]),J.ENGINE=J.OS=q([d,u]),Jn.exports&&(Qn=Jn.exports=J),Qn.UAParser=J;var Q=typeof e!==i&&(e.jQuery||e.Zepto);if(Q&&!Q.ua){var K=new J;Q.ua=K.getResult(),Q.ua.get=function(){return K.getUA()},Q.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var n in t)Q.ua[n]=t[n]}}}("object"==typeof window?window:ae);var Zn=Kn.exports;const Yn=new class{constructor(){this.initManager()}initManager(){window.freestar=window.freestar||{},this._setDeviceType()}_setDeviceType(){window.freestar.deviceInfo=Zn.UAParser(),window.freestar.deviceInfo.device.type||(window.freestar.deviceInfo.device={type:"desktop"})}getFormattedDeviceType(){if(window.freestar)return"Apple"===window.freestar.deviceInfo.device.vendor?"smartphone-ios":window.freestar.deviceInfo.device.type}},Xn=async()=>{let e=await fetch(`https://optimise.net/?k=${Hn.isKnown()}&d=${Cn()}&t=${Yn.getFormattedDeviceType()}${v("fsiasdebug")?"&g=experiment":""}`,{method:"GET",credentials:"include",headers:{"x-api-key":Ot}});const t=e.headers;e=await e.text(),e=JSON.parse(e);const{testGroup:n,knownUser:i}=e;return{data:{testGroup:n,knownUser:i,roundTripTime:t.get("fs-client-rtt"),...e.config},source:Rt}},ei=async()=>{let e;const t=Oe({key:Ct});return e=t?{data:t,source:Pt}:await Xn(),e},ti="fs.config";function ni({data:e,dataPath:t}){const n=function(e,t,n){if(!t)return;const i=(Array.isArray(t)?t:t.match(/([^[.\]])+/g)).reduce(((e,t)=>e&&e[t]),e);return void 0===i?n:i}(e,t);if(n)return"location"===t?{iso:n.countryCode,city:n.cityName,state:n.state}:n}async function ii({callback:e}){const t=await fetch(`https://a.pub.network/${a()}/fsdata.json`);if(!t.ok){const e=`No data returned from fsdata fallback endpoint: ${t.status}`;throw new Error(e)}const n=await t.json();n?(window.freestar.fsdata=n,window.freestar.locData=!1,window.freestar.networkMap=!1,e(null,!0)):e({error:"No data returned from fsdata endpoint"})}function ri(){const e=window.location.search.includes("fsdebug"),t=v("fsaltconfig"),n=v("fstesturl"),i={env:"PROD",version:!1};return e?(i.env="QA",S({isActive:!0})):t&&t>0&&(i.env="TEST",i.version=t),n.length&&freestar.queue.push((function(){googletag.pubads().set("page_url",n)})),i}function si({pubfigSettings:e}){const{abTest:t}=e;if(t&&!window.freestar.redirected){const{testGroup:n,testId:i,testType:r,testVariantId:s}=t;if(`${n}`.length&&q({key:f,value:`${n}`,type:j.string}),i&&q({key:p,value:i,type:j.string}),s&&q({key:m,value:s,type:j.string}),r&&(q({key:g,value:r,type:j.string}),"PUBFIG_TEMPLATE"===r&&e.pubfigLocation))return q({key:h,value:e.pubfigLocation,type:j.string}),e.pubfigLocation}return!1}const ai=[{owner:"google",ua:"googlebot"},{owner:"google",ua:"mediapartners-google"},{owner:"google",ua:"adsbot-google"},{owner:"bing",ua:"bingbot"},{owner:"yahoo",ua:"slurp"},{owner:"duckduckgo",ua:"duckduckbot"},{owner:"baidu",ua:"baiduspider"},{owner:"yandex",ua:"yandexbot"},{owner:"exabot",ua:"konqueror/3.5"},{owner:"exabot",ua:"Exabot/3.0"},{owner:"facebook",ua:"facebot"},{owner:"facebook",ua:"facebookexternalhit/1.0"},{owner:"facebook",ua:"facebookexternalhit/1.1"},{owner:"alexa",ua:"ia_archiver"}];async function oi(){!function(){let e=window.freestar||{};window.freestar=e,e.log=ve,e.msg={},sessionStorage.setItem("fs.session",JSON.stringify({id:Ae()}))}(),await ii({callback:()=>{te(`https://a.pub.network/core/analytics/${e.builds.analytics}/analytics.min.js`,(()=>{window.freestar.analytics.track({type:"customEvent",args:{eventName:"BOT_DETECTED",eventType:"botDetected",jsonValue:JSON.stringify({detected:!0})}})}))}})}function di(e,t){throw oi(),k({botCookieName:e,value:!0}),`pubfig code disabled as the user agent ${t} is a bot`}const li=()=>{!function(){let e;e=window.googletag||{},e.cmd=e.cmd||[],window.googletag=e,e.cmd.push((()=>{const t=z({key:f});t&&e.pubads().setTargeting("tg",t),e.pubads().setTargeting("fs_session_id",freestar.msg.sessionId),e.pubads().setTargeting("fs_pageview_id",freestar.msg.pageId)}))}(),window.googletag&&!window.googletag.apiReady&&te("https://securepubads.g.doubleclick.net/tag/js/gpt.js")};var ci={exports:{}};var ui,fi={exports:{}},pi=de(Object.freeze({__proto__:null,default:{}}));function gi(){return ui||(ui=1,function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==ae&&ae.crypto&&(n=ae.crypto),!n)try{n=pi}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},o=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=a.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var s=0;s<r;s++){var a=n[s>>>2]>>>24-s%4*8&255;t[i+s>>>2]|=a<<24-(i+s)%4*8}else for(var o=0;o<r;o+=4)t[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new d.init(t,e)}}),l=s.enc={},c=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var s=t[r>>>2]>>>24-r%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(n,t/2)}},u=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var s=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,s=i.sigBytes,a=this.blockSize,o=s/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*l,s);if(l){for(var u=0;u<l;u+=a)this._doProcessBlock(r,u);n=r.splice(0,l),i.sigBytes-=c}return new d.init(n,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}});var g=s.algo={};return s}(Math),n)}(fi)),fi.exports}!function(e,t){var n;e.exports=(n=gi(),function(e){var t=n,i=t.lib,r=i.WordArray,s=i.Hasher,a=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=a.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s=this._hash.words,a=e[t+0],d=e[t+1],p=e[t+2],g=e[t+3],m=e[t+4],h=e[t+5],b=e[t+6],w=e[t+7],y=e[t+8],v=e[t+9],k=e[t+10],_=e[t+11],I=e[t+12],S=e[t+13],x=e[t+14],E=e[t+15],T=s[0],A=s[1],C=s[2],P=s[3];T=l(T,A,C,P,a,7,o[0]),P=l(P,T,A,C,d,12,o[1]),C=l(C,P,T,A,p,17,o[2]),A=l(A,C,P,T,g,22,o[3]),T=l(T,A,C,P,m,7,o[4]),P=l(P,T,A,C,h,12,o[5]),C=l(C,P,T,A,b,17,o[6]),A=l(A,C,P,T,w,22,o[7]),T=l(T,A,C,P,y,7,o[8]),P=l(P,T,A,C,v,12,o[9]),C=l(C,P,T,A,k,17,o[10]),A=l(A,C,P,T,_,22,o[11]),T=l(T,A,C,P,I,7,o[12]),P=l(P,T,A,C,S,12,o[13]),C=l(C,P,T,A,x,17,o[14]),T=c(T,A=l(A,C,P,T,E,22,o[15]),C,P,d,5,o[16]),P=c(P,T,A,C,b,9,o[17]),C=c(C,P,T,A,_,14,o[18]),A=c(A,C,P,T,a,20,o[19]),T=c(T,A,C,P,h,5,o[20]),P=c(P,T,A,C,k,9,o[21]),C=c(C,P,T,A,E,14,o[22]),A=c(A,C,P,T,m,20,o[23]),T=c(T,A,C,P,v,5,o[24]),P=c(P,T,A,C,x,9,o[25]),C=c(C,P,T,A,g,14,o[26]),A=c(A,C,P,T,y,20,o[27]),T=c(T,A,C,P,S,5,o[28]),P=c(P,T,A,C,p,9,o[29]),C=c(C,P,T,A,w,14,o[30]),T=u(T,A=c(A,C,P,T,I,20,o[31]),C,P,h,4,o[32]),P=u(P,T,A,C,y,11,o[33]),C=u(C,P,T,A,_,16,o[34]),A=u(A,C,P,T,x,23,o[35]),T=u(T,A,C,P,d,4,o[36]),P=u(P,T,A,C,m,11,o[37]),C=u(C,P,T,A,w,16,o[38]),A=u(A,C,P,T,k,23,o[39]),T=u(T,A,C,P,S,4,o[40]),P=u(P,T,A,C,a,11,o[41]),C=u(C,P,T,A,g,16,o[42]),A=u(A,C,P,T,b,23,o[43]),T=u(T,A,C,P,v,4,o[44]),P=u(P,T,A,C,I,11,o[45]),C=u(C,P,T,A,E,16,o[46]),T=f(T,A=u(A,C,P,T,p,23,o[47]),C,P,a,6,o[48]),P=f(P,T,A,C,w,10,o[49]),C=f(C,P,T,A,x,15,o[50]),A=f(A,C,P,T,h,21,o[51]),T=f(T,A,C,P,I,6,o[52]),P=f(P,T,A,C,g,10,o[53]),C=f(C,P,T,A,k,15,o[54]),A=f(A,C,P,T,d,21,o[55]),T=f(T,A,C,P,y,6,o[56]),P=f(P,T,A,C,E,10,o[57]),C=f(C,P,T,A,b,15,o[58]),A=f(A,C,P,T,S,21,o[59]),T=f(T,A,C,P,m,6,o[60]),P=f(P,T,A,C,_,10,o[61]),C=f(C,P,T,A,p,15,o[62]),A=f(A,C,P,T,v,21,o[63]),s[0]=s[0]+T|0,s[1]=s[1]+A|0,s[2]=s[2]+C|0,s[3]=s[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var s=e.floor(i/4294967296),a=i;n[15+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var o=this._hash,d=o.words,l=0;l<4;l++){var c=d[l];d[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,i,r,s,a){var o=e+(t&n|~t&i)+r+a;return(o<<s|o>>>32-s)+t}function c(e,t,n,i,r,s,a){var o=e+(t&i|n&~i)+r+a;return(o<<s|o>>>32-s)+t}function u(e,t,n,i,r,s,a){var o=e+(t^n^i)+r+a;return(o<<s|o>>>32-s)+t}function f(e,t,n,i,r,s,a){var o=e+(n^(t|~i))+r+a;return(o<<s|o>>>32-s)+t}t.MD5=s._createHelper(d),t.HmacMD5=s._createHmacHelper(d)}(Math),n.MD5)}(ci);var mi=oe(ci.exports);const hi="fs.session";const bi=new class{constructor(){this.session=null,this.init()}init(){let e=z({key:hi});this.session=e?JSON.parse(e):{},this.session.id||(this.session.id=Vn());let t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].map((e=>({key:e,value:v(e)}))).filter((e=>""!==e.value));if(0!==t.length){let e={};t.forEach((t=>{e[t.key]=t.value})),this.session.utm=e}q({key:hi,type:j.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?this.session.utm[e]:null}};function wi(){if(freestar.fsdata&&freestar.fsdata.hashEnabled){const e=_({name:"fs.identifier.hash"});return window.location.hash=e&&e.length?e:function(){const e=function(){let e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxxxx".replace(/[x]/g,(function(){let t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),t.toString(16)}))}();return k({name:"fs.identifier.hash",value:e,expires:1825,path:"/"}),e}(),window.location.hash}return""}function yi(){freestar.msg=freestar.msg||{},freestar.msg.que=freestar.msg.que||[],freestar.msg.pageId=mi(window.location.href+freestar.hitTime+freestar.msg.fpc).toString(),freestar.msg.processing=freestar.msg.processing||!1,freestar.msg.round=freestar.msg.round||0,freestar.msg.loadTime=freestar.msg.loadTime||0,freestar.msg.hash=wi(),freestar.msg.sessionId=bi.getSessionId(),window.fsCmpInitMessage&&(freestar.msg.que.push(window.fsCmpInitMessage),freestar.log(10,window.fsCmpInitMessage.args.eventName,window.fsCmpInitMessage.args.eventType,window.fsCmpInitMessage.args.jsonValue),delete window.fsCmpInitMessage)}L().logMark({markerName:b.pubfigLoaded,isFreestarDataCollectorInitialized:!1});const vi=new URLSearchParams(window.location.search);!function(){if(v("fsdisable"))throw new Error("pubfig disabled.")}();if(function(e){const t="fs.bot.found",n=_({name:t});n&&!0===Boolean(n)?di(t,e):e&&!n&&(ai.forEach((n=>{RegExp(n.ua.toLowerCase()).test(e.toLowerCase())&&di(t,e)})),k({name:t,value:!1}))}(navigator.userAgent||window.navigator.userAgent),function(){let e=window.freestar||{};window.freestar=e,e.log=ve,e.version="5.39.5",e.hitTime=e.hitTime||Date.now(),e.queue=e.queue||[],e.config=e.config||{},e.pubfigState={configReady:!1},e.config.products=e.config.products?be(s,e.config.products):s,e.config.enabled_slots=e.config.enabled_slots||[],e.modulesLoaded=e.modulesLoaded||{engine:!1,messaging:!1,pubfig:!1,prebid:!1},e.msg={},e.msg.collectorURL=window.freestarUrl||"https://c.pub.network",e.msg.dispensaryURL=window.dispensaryUrl||t,e.consentManagement={consentData:{}},e.newAdSlots=function(t,n=null){e.loaded||re("newAdSlots"),e.queue.push((function(){e.newAdSlots(t,n)}))},e.deleteAdSlots=function(t){e.loaded||re("deleteAdSlots"),e.queue.push((function(){e.deleteAdSlots(t)}))},e.newStickyFooter=function(t){e.loaded||re("newStickyFooter"),e.queue.push((function(){e.newStickyFooter(t)}))},e.newSidewall=function(t){e.loaded||re("newSidewall"),e.queue.push((function(){e.newSidewall(t)}))},e.newVideo=function(t){e.loaded||re("newVideo"),e.queue.push((function(){e.newVideo(t)}))},e.newPushdown=function(t){e.loaded||re("newPushdown"),e.queue.push((function(){e.newPushdown(t)}))},e.newStandAlonePlayer=function(t){e.loaded||re("newStandAlonePlayer"),e.queue.push((function(){e.newStandAlonePlayer(t)}))},e.deleteStandAlonePlayer=function(t){e.loaded||re("deleteStandAlonePlayer"),e.queue.push((function(){e.deleteStandAlonePlayer(t)}))}}(),Yn.initManager(),!freestar.modulesLoaded.pubfig){let e=!1;const t=window.performance.getEntriesByType("navigation");t.length>0&&t[0].loadEventEnd>0&&(e=!0),window.addEventListener("load",(function(){e=!0})),vi.get("fsLoadPubfigVersion")&&(window.freestar.pubfigVersionToLoad=vi.get("fsLoadPubfigVersion")),Z().checkForAlternativeInstances({isTest:!1,performanceLogger:L()}),L().logMark({markerName:b.pubfigInitRequestStart,isFreestarDataCollectorInitialized:!1}),async function(e){let t=z({key:ti});if(t&&(t=JSON.parse(t),t.timestamp&&(Date.now()-t.timestamp)/1e3/60>=180&&(t=null)),("PROD"!==ri().env||"PROD"===ri().env&&t&&t.altconfig)&&(t=!1),!t){const n=await fetch(function(){const e=ri();let t=o.replace("ENV",e.env);"TEST"===e.env&&(t+=d.replace("NUMBER",e.version.toString())),"PROD"!==e.env&&(t+=l);const n=z({key:p}),i=z({key:m});return n&&(t+=c.replace("TEST_ID",n)),i&&(t+=u.replace("VARIANT_ID",i)),t}(),{credentials:"include"});n.ok||e({error:`No data returned from initURL fetching fsdata endpoint: ${n.status}`}),t=await n.json(),t.timestamp=Date.now(),"TEST"!==ri().env||t.altconfig||(t.altconfig=!0),q({key:ti,value:t,type:j.object})}if(freestar.msg.que=freestar.msg.que||[],t&&0===Object.keys(t).length)return window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"INIT_ENDPOINT_FAILED",eventType:"EMPTY_FSDATA",jsonValue:JSON.stringify(window.freestar.fsdata)}}),ii({callback:e});t?(Z().checkForAlternativeInstances({isTest:si({pubfigSettings:t.pubfigSettings}),performanceLogger:L()}),window.freestar.msg.fpc=ni({data:t,dataPath:"fsuid"}),window.freestar.locData=ni({data:t,dataPath:"location"}),window.freestar.networkMap=ni({data:t,dataPath:"networkMap.networks"}),window.freestar.fsdata=ni({data:t,dataPath:"pubfigSettings.fsdata"}),window.freestar.adRefreshTurboConfig=ni({data:t,dataPath:"adRefresh"}),Be(window.freestar.fsdata,window.freestar.adRefreshTurboConfig),window.freestar.fsdata&&0===Object.keys(window.freestar.fsdata).length&&(window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"INIT_ENDPOINT_FAILED",eventType:"EMPTY_FSDATA",jsonValue:JSON.stringify(window.freestar.fsdata)}}),ii({callback:e})),$e().fetch({fetchFn:ei,requestId:"getIdealData",onError:()=>{$e().fetch({requestId:"getFloorsData",fetchFn:()=>Pn(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,0)})},onSuccess:({data:e})=>{if(e){const{data:t}=e;if(t&&t.floors&&!t.floors.error&&t.floors.length>0)return}t&&t.floors&&!t.floors.error&&0!==t.floors.length||$e().fetch({requestId:"getFloorsData",fetchFn:()=>Pn(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,0)})}}),e(null,{})):e({error:"Empty fsdata returned from get call"})}(((t,n)=>{if(L().logMark({markerName:b.pubfigInitRequestEnd,compareTo:[b.pubfigInitRequestStart]}),N(window.freestar.fsdata.cmpType,window.freestar.locData),S({}),Y(),yi(),li(),freestar.fsdata.footerBiddingEnabled&&!qt({name:"footerBidding"})){let{psoDisableInteraction:t=!1}=freestar.fsdata;(!kt()||kt()&&t)&&(e?se():window.addEventListener("load",se)),kt()&&!t&&St({name:"engine",callback:se})}else se();freestar.modulesLoaded.pubfig=!0}))}}();
